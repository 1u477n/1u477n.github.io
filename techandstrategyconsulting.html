<!doctype html><html lang="en"><head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  
  <meta name="description" content="AI-native consulting for biotech & pharma" />
  <link rel="canonical" href="https://1u477n.github.io/techandstrategyconsulting.html" />
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://1u477n.github.io/techandstrategyconsulting.html">
  <meta property="og:title" content="AI-native consulting for biotech & pharma">
  <meta property="og:description" content="IT, AI & Strategy Consulting for modern R&D organizations">
  <meta property="og:image" content="https://1u477n.github.io/images/datainfrastructures.jpg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="AI-native consulting for biotech & pharma">
  <meta name="twitter:description" content="IT, AI & Strategy Consulting for modern R&D organizations">
  <meta name="twitter:image" content="https://1u477n.github.io/images/datainfrastructures.jpg">

  <meta name="color-scheme" content="light dark" />
  <meta name="theme-color" content="#070A12" id="themeColor">
  
  <title>IT & Strategy Consulting</title>
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-VW323NJP26"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-VW323NJP26');
  </script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Dark Theme (Default) - 2026 Palette */
      --bg0: #050505;
      --bg1: #0A0A0A;
      --text: #F2F2F2;
      --muted: rgba(255,255,255,0.7);
      --muted2: rgba(255,255,255,0.5);
      
      --panel: rgba(20, 20, 20, 0.6);
      --panel-hover: rgba(30, 30, 30, 0.8);
      --stroke: rgba(255,255,255,0.08);
      --stroke-hover: rgba(255,255,255,0.2);
      
      --a1: #38BDF8; /* Sky */
      --a2: #818CF8; /* Violet */
      --a3: #34D399; /* Emerald */
      
      --grad: linear-gradient(135deg, var(--a1), var(--a2));
      
      --shadow: 0 0 0 1px var(--stroke), 0 4px 20px rgba(0,0,0,0.4);
      --glow: 0 0 40px -10px var(--a1);
      
      --max: 1200px;
      --r24: 24px;
      --r20: 20px;
      --r16: 16px;

      /* AI Agent Specific Variables (Dark) */
      --ai-window-bg: rgba(15, 15, 15, 0.85);
      --ai-header-bg: rgba(255, 255, 255, 0.03);
      --ai-input-base: rgba(0, 0, 0, 0.4);
      --ai-bot-bubble: rgba(255, 255, 255, 0.06);
      --ai-bot-border: rgba(255, 255, 255, 0.05);
      --ai-user-bubble: var(--a1);
      --ai-user-text: #050505;
      --ai-accent: var(--a1);
    }

    /* Light Theme Override */
    [data-theme="light"] {
      --bg0: #F9FAFB;
      --bg1: #F3F4F6;
      --text: #111827;
      --muted: rgba(0,0,0,0.7);
      --muted2: rgba(0,0,0,0.5);
      
      --panel: rgba(255, 255, 255, 0.7);
      --panel-hover: rgba(255, 255, 255, 0.95);
      --stroke: rgba(0,0,0,0.08);
      --stroke-hover: rgba(0,0,0,0.2);
      
      --shadow: 0 0 0 1px var(--stroke), 0 4px 15px rgba(0,0,0,0.05);
      --glow: 0 0 30px -10px var(--a2);

      /* AI Agent Specific Variables (Light) */
      --ai-window-bg: rgba(255, 255, 255, 0.9);
      --ai-header-bg: rgba(0, 0, 0, 0.02);
      --ai-input-base: rgba(240, 240, 240, 0.7);
      --ai-bot-bubble: #FFFFFF;
      --ai-bot-border: rgba(0, 0, 0, 0.08);
      --ai-user-bubble: var(--a2);
      --ai-user-text: #FFFFFF;
      --ai-accent: var(--a2);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    
    html { scroll-behavior: smooth; }

    body {
      margin: 0;
      font-family: 'Inter', system-ui, sans-serif;
      background-color: var(--bg0);
      color: var(--text);
      overflow-x: hidden;
      padding: 20px;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    /* --- Atmospheric Backgrounds --- */
    .bg-orbs { position: fixed; inset: 0; z-index: -1; pointer-events: none; background: var(--bg0); overflow: hidden; }
    .orb { position: absolute; border-radius: 50%; filter: blur(80px); opacity: 0.4; animation: float 10s infinite ease-in-out alternate; }
    .orb-1 { width: 600px; height: 600px; background: var(--a1); top: -10%; left: -10%; animation-delay: 0s; }
    .orb-2 { width: 500px; height: 500px; background: var(--a2); bottom: -10%; right: -10%; animation-delay: -2s; }
    .orb-3 { width: 400px; height: 400px; background: var(--a3); top: 40%; left: 40%; opacity: 0.2; animation-delay: -5s; }

    @keyframes float { 0% { transform: translate(0, 0); } 100% { transform: translate(30px, 30px); } }

    .bg-noise { position: fixed; inset: 0; z-index: 0; pointer-events: none; opacity: 0.05; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E"); }

    .container { max-width: var(--max); margin: 0 auto; position: relative; z-index: 1; }

    /* --- Floating Navigation (Pill) --- */
    .topbar { display: flex; justify-content: space-between; align-items: center; padding: 12px 16px; background: var(--panel); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border: 1px solid var(--stroke); border-radius: 99px; margin-bottom: 40px; box-shadow: var(--shadow); position: sticky; top: 20px; z-index: 100; }
    .brand { display: flex; align-items: center; gap: 12px; }
    .theme-toggle { width: 36px; height: 36px; border-radius: 50%; background: var(--grad); border: 0; cursor: pointer; display: grid; place-items: center; color: white; box-shadow: 0 4px 12px rgba(56, 189, 248, 0.4); transition: transform 0.2s ease; }
    .theme-toggle:hover { transform: scale(1.05); }
    .theme-toggle svg { width: 18px; height: 18px; }
    [data-theme="dark"] .sun { display: none; }
    [data-theme="light"] .moon { display: none; }
    .brand-text { display: flex; flex-direction: column; line-height: 1.2; }
    .brand-text strong { font-size: 14px; font-weight: 700; }
    .brand-text span { font-size: 12px; color: var(--muted2); }
    .menu-btn { width: 40px; height: 40px; display: grid; place-items: center; border-radius: 50%; border: 1px solid var(--stroke); background: rgba(255,255,255,0.05); color: var(--text); cursor: pointer; transition: 0.2s; }
    .menu-btn:hover { background: rgba(255,255,255,0.1); border-color: var(--text); }
    .menu{ position: fixed; top: 80px; right: 20px; width: min(300px, 90vw); background: var(--panel-hover); border: 1px solid var(--stroke); border-radius: 20px; backdrop-filter: blur(24px); box-shadow: 0 20px 50px rgba(0,0,0,0.5); padding: 8px; display: none; z-index: 999; flex-direction: column; gap: 4px; }
    .menu.open { display: flex; animation: fadeDown 0.2s ease-out; }
    @keyframes fadeDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
    .menu a { padding: 12px 16px; text-decoration: none; color: var(--text); font-size: 14px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; transition: background 0.2s; }
    .menu a:hover { background: rgba(255,255,255,0.08); }
    .menu a span { font-size: 16px; opacity: 0.5; }

    /* --- Page Layout --- */
    .content-grid { display: grid; grid-template-columns: 1fr; gap: 24px; align-items: start; }
    @media (min-width: 980px){ .content-grid { grid-template-columns: 1fr 300px; } .toc-wrapper { position: sticky; top: 100px; } }

    /* --- Hero Section --- */
    .hero { padding: 32px; background: var(--panel); border: 1px solid var(--stroke); border-radius: 32px; backdrop-filter: blur(10px); margin-bottom: 24px; box-shadow: var(--shadow); }
    .kicker { display: inline-flex; align-items: center; gap: 8px; padding: 6px 12px; border-radius: 99px; background: rgba(56,189,248,0.1); border: 1px solid rgba(56,189,248,0.2); color: var(--a1); font-size: 12px; font-weight: 700; margin-bottom: 16px; }
    .kicker i { width: 6px; height: 6px; border-radius: 50%; background: var(--a1); box-shadow: 0 0 8px var(--a1); }
    h1 { margin: 0 0 16px; font-size: clamp(28px, 5vw, 42px); letter-spacing: -0.02em; line-height: 1.1; }
    .grad-text { background: var(--grad); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .lead { font-size: 16px; line-height: 1.6; color: var(--muted); max-width: 78ch; margin-bottom: 24px; }
    .meta-row { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 24px; }
    .pill { font-size: 12px; padding: 6px 12px; border-radius: 99px; border: 1px solid var(--stroke); background: rgba(255,255,255,0.03); color: var(--muted); }
    .pill b { color: var(--text); margin-right: 4px; }
    .quote { padding: 16px; border: 1px solid var(--stroke); background: rgba(255,255,255,0.04); border-radius: 16px; margin-bottom: 32px; font-size: 14px; line-height: 1.6; color: var(--muted); box-shadow: var(--shadow); }
    .quote em { color: var(--text); font-style: italic; display: block; margin-bottom: 8px; }
    .quote .by { font-weight: 700; color: var(--muted2); }

    /* --- Hero Grid (Bio + Gift Sidebar) --- */
    .hero-split { display: grid; grid-template-columns: 1.25fr 0.85fr; gap: 24px; align-items: start; }
    @media(max-width: 920px) { .hero-split { grid-template-columns: 1fr; } }
    .bio-text p { font-size: 15px; line-height: 1.6; color: var(--muted); margin-bottom: 16px; }
    .bio-text a { color: var(--a1); text-decoration: none; }
    .gift-card { background: radial-gradient(at top left, rgba(56,189,248,0.1), transparent), rgba(255,255,255,0.04); border: 1px solid rgba(56,189,248,0.2); border-radius: 20px; padding: 24px; box-shadow: var(--shadow); }
    .gift-card h2 { margin-top: 0; font-size: 18px; margin-bottom: 10px; }
    .gift-list { list-style: none; padding: 0; margin: 16px 0; display: grid; gap: 12px; }
    .gift-list li { display: flex; gap: 10px; font-size: 13px; line-height: 1.5; color: var(--muted); background: rgba(255,255,255,0.03); padding: 10px; border-radius: 12px; border: 1px solid var(--stroke); }
    .gift-list li::before { content: ""; width: 8px; height: 8px; border-radius: 50%; background: var(--grad); margin-top: 6px; flex-shrink: 0; }

    /* --- Services Grid (G I F T) --- */
    .section-head { margin: 40px 0 20px; display: flex; justify-content: space-between; align-items: flex-end; }
    .section-head h2 { font-size: 20px; margin: 0; }
    .section-head p { margin: 0; font-size: 13px; color: var(--muted2); }
    .services-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px; }
    .card { background: var(--panel); border: 1px solid var(--stroke); border-radius: 24px; padding: 24px; position: relative; overflow: hidden; transition: all 0.3s ease; }
    .card::before { content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(120deg, transparent 30%, rgba(255,255,255,0.05) 50%, transparent 70%); transform: translateX(-100%); transition: transform 0.6s; }
    .card:hover { transform: translateY(-4px); border-color: var(--a1); box-shadow: 0 10px 30px rgba(56,189,248,0.15); }
    .card:hover::before { transform: translateX(100%); }
    .card h3 { margin: 0 0 8px; font-size: 18px; color: var(--text); }
    .card .sub { font-size: 13px; color: var(--muted2); margin-bottom: 16px; display: block; }
    .check-list { list-style: none; padding: 0; margin: 0; display: grid; gap: 10px; }
    .check-list li { font-size: 13px; color: var(--muted); line-height: 1.5; padding: 10px; background: rgba(255,255,255,0.03); border-radius: 12px; border: 1px solid var(--stroke); display: flex; gap: 10px; }
    .check-list li::before { content: ""; width: 8px; height: 8px; border-radius: 50%; background: var(--a1); margin-top: 6px; flex-shrink: 0; }

    /* --- Media Grid --- */
    .media-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 16px; }
    .media-card { background: var(--panel); border: 1px solid var(--stroke); border-radius: 20px; overflow: hidden; transition: transform 0.3s ease; display: flex; flex-direction: column; }
    .media-card:hover { transform: translateY(-4px); border-color: var(--stroke-hover); }
    .media-img { width: 100%; aspect-ratio: 16/9; object-fit: cover; cursor: zoom-in; }
    .media-body { padding: 16px; flex: 1; display: flex; flex-direction: column; gap: 8px; }
    .media-body h4 { margin: 0; font-size: 14px; line-height: 1.4; font-weight: 700; }
    .media-body h4 a { color: var(--text); text-decoration: none; }
    .media-body h4 a:hover { color: var(--a1); }
    .media-body p { margin: 0; font-size: 12px; color: var(--muted2); line-height: 1.5; }

    /* --- Sidebar TOC --- */
    .toc { background: var(--panel); border: 1px solid var(--stroke); border-radius: 24px; padding: 16px; backdrop-filter: blur(12px); }
    .toc details summary { cursor: pointer; font-size: 13px; font-weight: 700; color: var(--muted2); text-transform: uppercase; letter-spacing: 0.05em; outline: none; list-style: none; display: flex; justify-content: space-between; align-items: center; }
    .toc details summary::after { content: "‚àí"; font-size: 16px; font-weight: 400; }
    .toc details:not([open]) summary::after { content: "+"; }
    .toc details summary::-webkit-details-marker { display: none; }
    .toc-nav { display: flex; flex-direction: column; gap: 6px; margin-top: 12px; animation: fadein 0.3s ease; }
    .toc-nav a { text-decoration: none; font-size: 12px; color: var(--muted); padding: 8px 12px; border-radius: 12px; transition: all 0.2s; border: 1px solid transparent; }
    .toc-nav a:hover { background: rgba(255,255,255,0.05); border-color: var(--stroke); color: var(--text); }
    .toc-nav a.active { background: rgba(56,189,248,0.1); color: var(--text); border-color: rgba(56,189,248,0.25); }

    /* --- Lightbox --- */
    .lightbox { display: none; position: fixed; inset: 0; z-index: 2000; background: rgba(0,0,0,0.9); backdrop-filter: blur(10px); align-items: center; justify-content: center; flex-direction: column; }
    .lightbox.open { display: flex; animation: fadein 0.2s; }
    @keyframes fadein { from { opacity: 0; } to { opacity: 1; } }
    .lightbox-content { max-width: 90vw; max-height: 80vh; border-radius: 12px; box-shadow: 0 0 50px rgba(0,0,0,0.5); border: 1px solid var(--stroke); }
    .lightbox-caption { margin-top: 16px; color: #fff; font-size: 14px; text-align: center; }
    .close-lightbox { position: absolute; top: 20px; right: 20px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: #fff; width: 44px; height: 44px; border-radius: 12px; font-size: 24px; cursor: pointer; display: grid; place-items: center; }
    .close-lightbox:hover { background: rgba(255,255,255,0.2); }
    .footer { margin-top: 40px; padding: 20px; text-align: center; font-size: 12px; color: var(--muted2); border-top: 1px solid var(--stroke); }
    
    /* ==========================================
       VIRTUAL L.U.A.T STYLES (Blueprint UI Applied)
       ========================================== */
    .agent-trigger-wrapper {
        position: fixed; bottom: 30px; right: 30px;
        z-index: 1000; display: flex; flex-direction: column;
        align-items: center; gap: 12px;
    }
    .header-brand { display: flex; align-items: center; gap: 10px; }
    .header-logo { width: 24px; height: 24px; border-radius: 50%; object-fit: cover; box-shadow: 0 0 5px var(--a1); }
    .avatar-group { position: relative; width: 80px; height: 80px; }
    .avatar-wrap {
        width: 100%; height: 100%; border-radius: 50%; padding: 3px;
        background: linear-gradient(135deg, var(--a1), var(--a2));
        box-shadow: 0 0 30px -10px var(--a1);
    }
    .avatar {
        width: 100%; height: 100%; border-radius: 50%; object-fit: cover;
        border: 3px solid var(--bg0); background-color: var(--bg0);
    }
    .agent-trigger {
        position: absolute; top: -5px; right: -5px;
        width: 32px; height: 32px; border-radius: 50%;
        background: var(--bg0); border: 2px solid var(--a1);
        box-shadow: 0 0 10px rgba(56, 189, 248, 0.5);
        cursor: pointer; display: grid; place-items: center; z-index: 10;
        transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .agent-trigger::after {
        content: ''; position: absolute; inset: -4px; border-radius: 50%;
        border: 2px solid var(--a1); opacity: 0; animation: pulseRing 2s infinite;
    }
    @keyframes pulseRing { 0% { transform: scale(1); opacity: 0.8; } 100% { transform: scale(1.4); opacity: 0; } }
    .agent-trigger:hover { transform: scale(1.1) rotate(10deg); }
    .agent-trigger svg { color: var(--a1); width: 16px; height: 16px; }

    /* Sliding AI Agent Window & Glow */
    .agent-window {
        position: fixed; bottom: 130px; right: 30px;
        width: min(380px, 90vw); height: 550px;
        background: var(--ai-window-bg);
        backdrop-filter: blur(30px); -webkit-backdrop-filter: blur(30px);
        border: 1px solid var(--stroke); border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.6), 0 0 0 1px var(--stroke);
        display: flex; flex-direction: column;
        transform: scale(0.9) translateY(20px); opacity: 0;
        pointer-events: none; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), box-shadow 0.4s ease, border-color 0.4s ease;
        z-index: 1000; overflow: hidden; will-change: transform, opacity, box-shadow, border-color;
    }
    .agent-window.active { transform: scale(1) translateY(0); opacity: 1; pointer-events: all; }
    .agent-window.is-thinking { animation: windowPulseGlow 2s cubic-bezier(0.4, 0, 0.2, 1) infinite; }
    
    @keyframes windowPulseGlow {
      0%, 100% { box-shadow: 0 20px 60px rgba(0,0,0,0.4), 0 0 10px 0px rgba(56, 189, 248, 0.2); border-color: var(--stroke); }
      50% { box-shadow: 0 20px 60px rgba(0,0,0,0.5), 0 0 40px 5px rgba(56, 189, 248, 0.5); border-color: var(--a1); }
    }

    .agent-header {
        padding: 16px 20px; border-bottom: 1px solid var(--stroke);
        font-weight: 700; font-size: 14px; display: flex;
        justify-content: space-between; align-items: center;
        background: var(--ai-header-bg); color: var(--text);
    }
    .agent-close { cursor: pointer; opacity: 0.5; padding: 4px; border-radius: 50%; display: grid; place-items: center; transition: 0.2s; }
    .agent-close:hover { opacity: 1; background: var(--stroke); color: var(--a1); }

    /* Glassmorphism Scrollbar */
    .chat-area { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 16px; font-size: 14.5px; }
    .chat-area::-webkit-scrollbar { width: 6px; }
    .chat-area::-webkit-scrollbar-track { background: transparent; margin: 10px 0; }
    .chat-area::-webkit-scrollbar-thumb { background-color: var(--stroke); border-radius: 10px; }
    .chat-area::-webkit-scrollbar-thumb:hover { background-color: var(--a1); box-shadow: 0 0 10px var(--a1); }

    .msg { padding: 12px 16px; max-width: 85%; line-height: 1.5; word-wrap: break-word; border-radius: 18px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
    .msg-bot { background: var(--ai-bot-bubble); color: var(--text); border: 1px solid var(--ai-bot-border); align-self: flex-start; border-bottom-left-radius: 4px; }
    .msg-user { background: linear-gradient(90deg, var(--a2), var(--a1)); color: white; align-self: flex-end; border-bottom-right-radius: 4px; font-weight: 500; }

    /* Interactive Consulting Chips */
    .chat-chips { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 12px; }
    .chip-btn { background: rgba(56, 189, 248, 0.1); border: 1px solid rgba(56, 189, 248, 0.3); color: var(--a1); border-radius: 16px; padding: 6px 12px; font-size: 12px; cursor: pointer; transition: 0.2s; font-weight: 500; text-align: left; }
    .chip-btn:hover { background: rgba(56, 189, 248, 0.2); transform: translateY(-1px); }
    .chip-primary { background: var(--grad); color: #fff; border: none; box-shadow: 0 4px 10px rgba(56,189,248,0.3); }
    .chip-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 15px rgba(56,189,248,0.4); }

    .input-area { padding: 16px; border-top: 1px solid var(--stroke); display: flex; gap: 10px; background: var(--ai-input-base); }
    .chat-input { flex: 1; background: var(--bg0); border: 1px solid var(--stroke); border-radius: 12px; padding: 12px 14px; color: var(--text); font-family: inherit; font-size: 14px; transition: 0.2s; box-shadow: inset 0 2px 4px rgba(0,0,0,0.05); }
    .chat-input:focus { outline: none; border-color: var(--a1); box-shadow: 0 0 10px rgba(56, 189, 248, 0.2); }
    .send-btn { background: var(--panel); border: 1px solid var(--stroke); border-radius: 12px; width: 46px; display: grid; place-items: center; cursor: pointer; color: var(--a1); transition: 0.2s; }
    .send-btn:hover { background: var(--a1); color: #000; }

    /* Modern Typing Dots */
    .typing-indicator { display: inline-flex; align-items: center; gap: 4px; height: 20px; }
    .typing-dot { width: 5px; height: 5px; border-radius: 50%; background-color: var(--a1); animation: typingBounceGlow 1.4s cubic-bezier(0.4, 0, 0.2, 1) infinite; }
    .typing-dot:nth-child(1) { animation-delay: 0s; }
    .typing-dot:nth-child(2) { animation-delay: 0.15s; }
    .typing-dot:nth-child(3) { animation-delay: 0.3s; }
    @keyframes typingBounceGlow {
      0%, 100% { transform: translateY(0) scale(0.8); opacity: 0.3; box-shadow: 0 0 0px transparent; }
      50% { transform: translateY(-4px) scale(1.2); opacity: 1; box-shadow: 0 2px 8px 1px var(--a1); }
    }

    /* Particle Engine & Markdown Styles */
    .floating-emoji { position: fixed; pointer-events: none; z-index: 999999; transition: transform 1s cubic-bezier(0.25, 1, 0.5, 1), opacity 1s ease-out; }

    .msg-bot pre { background: var(--bg0); border: 1px solid var(--stroke); border-radius: 8px; padding: 12px; overflow-x: auto; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; font-size: 12px; margin: 10px 0; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1); }
    .msg-bot code { background: rgba(56, 189, 248, 0.15); color: var(--a1); padding: 2px 6px; border-radius: 4px; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; font-size: 12.5px; }
    .msg-bot pre code { background: transparent; color: var(--text); padding: 0; }
    .msg-bot a { color: var(--a1); text-decoration: none; border-bottom: 1px dashed var(--a1); transition: opacity 0.2s; }
    .msg-bot a:hover { opacity: 0.7; }
    .msg-bot table { width: 100%; border-collapse: collapse; margin: 10px 0; font-size: 13px; }
    .msg-bot th, .msg-bot td { border: 1px solid var(--stroke); padding: 8px; text-align: left; }
    .msg-bot th { background: rgba(255,255,255,0.05); font-weight: 600; }

    .msg-bot .code-wrapper { position: relative; margin: 10px 0; }
    .msg-bot .code-wrapper pre { margin: 0; padding-top: 36px; }
    .copy-code-btn { position: absolute; top: 8px; right: 8px; background: rgba(255, 255, 255, 0.1); border: 1px solid var(--stroke); color: var(--muted); border-radius: 6px; width: 28px; height: 28px; display: grid; place-items: center; cursor: pointer; transition: all 0.2s ease; z-index: 2; }
    .copy-code-btn:hover { background: rgba(255, 255, 255, 0.2); color: var(--text); border-color: var(--a1); }
    [data-theme="light"] .copy-code-btn { background: rgba(0, 0, 0, 0.05); }
    [data-theme="light"] .copy-code-btn:hover { background: rgba(0, 0, 0, 0.1); }
  </style>
</head><body>
  <div class="bg-orbs">
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>
  </div>
  <div class="bg-noise"></div>

  <div class="container">
    <header class="topbar">
      <div class="brand">
        <button class="theme-toggle" id="themeToggle" aria-label="Toggle Theme">
          <svg class="sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
          <svg class="moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
        </button>
        <div class="brand-text">
          <strong>IT & Strategy Consulting</strong>
          <span>AI-ready R&amp;D, data, and fundraising strategy</span>
        </div>
      </div>
      <button class="menu-btn" id="menuBtn" aria-label="Menu">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
      </button>
    </header>

    <nav class="menu" id="menuPanel">
      <a href="https://1u477n.github.io/">Home <span>‚Üí</span></a>
      <a href="https://1u477n.github.io/about.html">About Me <span>‚Üí</span></a>
      <a href="https://1u477n.github.io/techandstrategyconsulting.html">Consulting <span>‚Üí</span></a>
      <a href="https://1u477n.github.io/publishedworks.html">Published Works <span>‚Üí</span></a>
      <a href="https://1u477n.github.io/workrecognitions.html">Work Recognitions <span>‚Üí</span></a>
      <a href="https://1u477n.github.io/blogs/mainpage.html">Blogs <span>‚Üí</span></a>
      <a href="https://1u477n.github.io/images/cv.pdf">CV (PDF) <span>‚Üì</span></a>
      <a href="https://www.linkedin.com/in/1u477n/" target="_blank">LinkedIn <span>‚Üó</span></a>
    </nav>

    <div class="content-grid">
      <main>
        
        <section class="hero" id="intro">
          <div class="kicker"><i></i> AI-native consulting for biotech & pharma</div>
          <h1>
            <span class="grad-text">IT & Strategy Consulting</span><br />
            for modern R&amp;D organizations
          </h1>
          <p class="lead">
            Luat (Luke) Nguyen is an experienced technology strategist specializing in R&amp;D IT, AI/ML integration,
            and data analytics within the biotech and pharmaceutical industries. With a background in biochemistry/chemistry,
            computer science, and economics, he has developed a deep understanding of IT infrastructure, product management,
            and business analysis.
          </p>
          
          <div class="meta-row">
            <span class="pill"><b>Focus</b> R&amp;D IT ¬∑ AI/ML ¬∑ Data governance</span>
            <span class="pill"><b>Domains</b> Biotech ¬∑ Pharma ¬∑ Scientific computing</span>
            <span class="pill"><b>Outcomes</b> Digital transformation ¬∑ Investor readiness</span>
          </div>

          <div class="quote">
            <em>‚ÄúIt doesn‚Äôt matter how beautiful your theory is, it doesn‚Äôt matter how smart you are. If it doesn‚Äôt agree with experiment, it‚Äôs wrong.‚Äù</em>
            <span class="by">‚Äî Richard Feynman</span>
            <div style="margin-top:8px; font-size: 12px; opacity: 0.7;">
              (...inspired by <a href="https://www.linkedin.com/posts/adammgrant_have-you-ever-hesitated-to-share-your-work-activity-7311774949793234944-9rme?utm_source=share&utm_medium=member_desktop&rcm=ACoAAAMcMqIBGCZJXmtjKkgejIZlsIYP2oLhPJU" target="_blank" rel="noreferrer" style="color:inherit">a video from Adam Grant</a>)
            </div>
          </div>

          <div class="hero-split">
            <div class="bio-text">
              <p>
                Luke is also an inventor with hands-on experience and proprietary, data-driven scientific expertise in the discovery of highly selective
                and specific small-molecule drug candidates‚Äîover 70% of his proposed compounds were independently validated through experimental studies
                by scientists at the <a href="https://www.ucsf.edu/" target="_blank" rel="noreferrer">University of California, San Francisco</a>.
              </p>
              <p>
                He is a co-author of patents in
                <a href="https://1u477n.github.io/publishedworks/Patent_US6699719.pdf">biosensor arrays</a> (from a spin-off of 
                <a href="https://www.berkeley.edu">UC Berkeley</a> and 
                <a href="https://www.stanford.edu">Stanford</a>), 
                <a href="https://1u477n.github.io/publishedworks/Patent_US8586619.pdf">calcium ion channel modulators</a>, and 
                <a href="https://1u477n.github.io/publishedworks/Patent_PCT_US2009_067197.pdf">receptor tyrosine kinase inhibitors</a> 
                (<a href="https://www.genengnews.com/topics/drug-discovery/purdue-pharma-acquires-trka-inhibitor-program-for-up-to-213m/">TrkA program was later acquired by Purdue Pharma</a>), 
                demonstrating an innovative approach to tackling complex scientific and technological challenges. 
                He is passionate about leveraging cutting-edge technologies to drive business value and enhance R&amp;D processes.
              </p>
            </div>
            
            <aside class="gift-card">
              <h2><span class="grad-text">Our GIFT service model</span></h2>
              <p style="font-size:13px; color:var(--muted); margin-bottom:12px;">To empower biologists with innovative startup ideas to turn scientific expertise into entrepreneurial ventures.</p>
              <ul class="gift-list">
                <li>1.5% success fee on the first $10M raised, then 1% on all additional funds.</li>
                <li>For identifying and developing small-molecule drug candidates: 2% success fee on the first $10M raised, then a tiered structure up to 3.5%.</li>
                <li>Revenue-sharing or royalties can be structured flexibly to align with long-term success.</li>
              </ul>
              <p style="font-size:12px; opacity:0.7; margin-top:12px;">We‚Äôre here to drive your success‚Äîflexible, scalable economics designed to maximize value at every stage.</p>
            </aside>
          </div>
        </section>

        <div class="section-head">
          <h2>Consulting Services</h2>
          <p>G ¬∑ I ¬∑ F ¬∑ T ‚Äî a structured engagement model</p>
        </div>

        <section class="services-grid" id="services">
          <div class="card" id="srv-g">
            <h3 class="grad-text">G ‚Äî Growth &amp; Fundraising Strategy</h3>
            <span class="sub">Capital strategy, investor readiness, and technical diligence.</span>
            <ul class="check-list">
              <li>Capital strategy for biotech ventures ‚Äî success-fee &amp; revenue-sharing models aligned to growth.</li>
              <li>Fundraising &amp; investor readiness ‚Äî support for early-stage and milestone-based funding.</li>
              <li>Technology due diligence ‚Äî evaluate scientific feasibility &amp; IT infrastructure for investors/startups.</li>
            </ul>
          </div>
          
          <div class="card" id="srv-i">
            <h3 class="grad-text">I ‚Äî Informatics &amp; AI-Driven R&amp;D</h3>
            <span class="sub">Modern scientific platforms that move data reliably from bench to insight.</span>
            <ul class="check-list">
              <li>Scientific informatics strategy ‚Äî Entity &amp; Assay Registration, Sample Management, ELN, LIMS, lab automation.</li>
              <li>AI &amp; computational chemistry platforms ‚Äî AI-driven pipelines integrating bioinformatics, ML, and HPC.</li>
              <li>Data governance &amp; security ‚Äî GxP, HIPAA, GDPR, FDA-aligned integrity and security controls.</li>
            </ul>
          </div>

          <div class="card" id="srv-f">
            <h3 class="grad-text">F ‚Äî Future-Ready IT &amp; Digital Transformation</h3>
            <span class="sub">Cloud, hybrid, and on-prem strategies built for regulated R&amp;D reality.</span>
            <ul class="check-list">
              <li>R&amp;D IT strategy &amp; infrastructure ‚Äî cloud-based, hybrid, and on-prem environments for R&amp;D.</li>
              <li>Enterprise integration &amp; SaaS strategy ‚Äî vendor selection, implementation, interoperability.</li>
              <li>Agile product management &amp; roadmaps ‚Äî scalable IT solutions aligned to R&amp;D execution.</li>
            </ul>
          </div>

          <div class="card" id="srv-t">
            <h3 class="grad-text">T ‚Äî Technology-Driven Drug Discovery &amp; Cybersecurity</h3>
            <span class="sub">Secure, scalable compute + modern model lifecycle practices.</span>
            <ul class="check-list">
              <li>Computational drug discovery &amp; bioinformatics ‚Äî AI/ML modeling for small molecules &amp; biologics.</li>
              <li>Cybersecurity &amp; compliance ‚Äî access controls, vulnerability management, disaster recovery planning.</li>
              <li>Scalable AI/ML infrastructure ‚Äî automated pipelines, workflow optimization, model lifecycle management.</li>
            </ul>
          </div>
        </section>

        <div class="section-head">
          <h2>Featured</h2>
          <p>Click any image to zoom</p>
        </div>

        <section class="media-grid" id="featured">
          <figure class="media-card">
            <img class="media-img zoomable" 
                 loading="lazy" decoding="async"
                 src="https://1u477n.github.io/images/datalifecycle_AF3_IT.jpeg" 
                 alt="Preclinical Drug Discovery Data Life Cycle">
            <figcaption class="media-body">
              <h4><a href="https://1u477n.github.io/blogs/20260104_aialphafoldblueprint.html">The AI Blueprint: Why AlphaFold is the New Foundation of Preclinical Drug Discovery Research</a></h4>
              <p>Data lifecycle framing for AI-first preclinical discovery.</p>
            </figcaption>
          </figure>
          
          <figure class="media-card">
            <img class="media-img zoomable" 
                 loading="lazy" decoding="async"
                 src="https://1u477n.github.io/images/bresearch_preclinical_datalifecycle.jpeg" 
                 alt="Basic Research and Drug Discovery Data Life Cycle">
            <figcaption class="media-body">
              <h4>The Importance of Basic Research During #AI Era ‚Äî The Billion-Dollar Shortcut</h4>
              <p>How we stopped guessing and started engineering better drugs.</p>
            </figcaption>
          </figure>

          <figure class="media-card">
            <img class="media-img zoomable" 
                 loading="lazy" decoding="async"
                 src="https://1u477n.github.io/images/datainfrastructures.jpg" 
                 alt="Integrated Research Data Infrastructures">
            <figcaption class="media-body">
              <h4><a href="https://www.nature.com/articles/s44401-025-00058-9" target="_blank" rel="noreferrer">Ref: Modernizing Data and Data Science Infrastructure as a Strategic Asset for Cancer Centers</a></h4>
              <p>Position data platforms as a strategic asset, not overhead.</p>
            </figcaption>
          </figure>

          <figure class="media-card">
            <img class="media-img zoomable" 
                 loading="lazy" decoding="async"
                 src="https://1u477n.github.io/images/modalities.PNG" 
                 alt="Drug Modalities Illustration and Definition">
            <figcaption class="media-body">
              <h4>Drug Modalities</h4>
              <p>Illustration and definitions across modern therapeutic modalities.</p>
            </figcaption>
          </figure>
        </section>

      </main>

      <aside class="toc-wrapper">
        <nav class="toc">
          <details open>
            <summary>On this page</summary>
            <div class="toc-nav" id="tocNav">
              </div>
          </details>
        </nav>
      </aside>
    </div>

    <footer class="footer">
      ¬© <span id="year"></span> ¬∑ IT & Strategy Consulting ¬∑ <a href="https://1u477n.github.io/">Home</a>
    </footer>
  </div>

  <div id="imageLightbox" class="lightbox">
    <button class="close-lightbox" id="lightboxClose">√ó</button>
    <img class="lightbox-content" id="img01" alt="">
    <div id="caption" class="lightbox-caption"></div>
  </div>

  <div class="agent-trigger-wrapper">
      <div class="avatar-group">
        <div class="avatar-wrap">
          <img class="avatar" src="https://blueprintaipartners.com/images/logo.gif" alt="Luat Avatar">
        </div>
        <div class="agent-trigger" id="agentTrigger" title="Chat with Virtual L.U.A.T">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>
        </div>
      </div>
  </div>

  <div class="agent-window" id="agentWindow">
      <div class="agent-header">
        <div class="header-brand">
          <img src="https://1u477n.github.io/images/avatar.gif" alt="Luat Avatar" class="header-logo">
          <span>Virtual L.U.A.T</span>
        </div>
        <span class="agent-close" id="agentClose" title="Close">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
        </span>
      </div>
      
      <div class="chat-area" id="chatArea">
        <div class="msg msg-bot">
          Hello. I am the digital consultant for Luat (Luke) Nguyen. How can we help scale your biotech's R&D or data infrastructure today?
          <div class="chat-chips">
            <button class="chip-btn chip-primary" onclick="triggerSimulation()">Run Strategy Simulator üöÄ</button>
            <button class="chip-btn" onclick="triggerChat('Explain the GIFT model')">Explain the GIFT model</button>
            <button class="chip-btn" onclick="triggerChat('What is your AI strategy?')">What is your AI strategy?</button>
          </div>
        </div>
      </div>
      
      <div class="input-area">
        <input type="text" class="chat-input" id="chatInput" placeholder="Ask about strategy, IT, or play..." autocomplete="off">
        <button class="send-btn" id="sendBtn" title="Send Message">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
        </button>
      </div>
  </div>

  <script>
    document.getElementById("year").textContent = new Date().getFullYear();

    // Theme Toggle
    (function(){
      const root = document.documentElement;
      const toggle = document.getElementById("themeToggle");
      const storageKey = "theme";
      
      function updateTheme(theme){
        root.setAttribute("data-theme", theme);
        const meta = document.getElementById("themeColor");
        if(meta) meta.setAttribute("content", theme === "dark" ? "#070A12" : "#F9FAFB");
      }

      const saved = localStorage.getItem(storageKey);
      const media = window.matchMedia("(prefers-color-scheme: light)");
      
      if(saved) updateTheme(saved);
      else updateTheme(media.matches ? "light" : "dark");

      toggle.addEventListener("click", () => {
        const current = root.getAttribute("data-theme");
        const next = current === "dark" ? "light" : "dark";
        updateTheme(next);
        localStorage.setItem(storageKey, next);
      });
    })();

    // Menu Logic
    const menuBtn = document.getElementById("menuBtn");
    const menuPanel = document.getElementById("menuPanel");
    menuBtn.addEventListener("click", (e) => { e.stopPropagation(); menuPanel.classList.toggle("open"); });
    document.addEventListener("click", (e) => { if(!menuPanel.contains(e.target) && e.target !== menuBtn) menuPanel.classList.remove("open"); });

    // Auto-TOC Generator
    const headings = document.querySelectorAll("h2, h3");
    const nav = document.getElementById("tocNav");
    
    headings.forEach((h, index) => {
        if(!h.id) h.id = "section-" + index;
        const link = document.createElement("a");
        link.href = "#" + h.id;
        
        link.textContent = h.textContent.replace(/\s+/g, " ").trim();
        
        if(h.tagName === "H3") link.style.paddingLeft = "20px";
        
        link.addEventListener("click", (e) => {
            e.preventDefault();
            document.querySelector(link.getAttribute("href")).scrollIntoView({ behavior: "smooth" });
        });
        nav.appendChild(link);
    });

    // Scroll Spy for TOC
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                document.querySelectorAll(".toc-nav a").forEach(a => a.classList.remove("active"));
                const activeLink = document.querySelector(`.toc-nav a[href="#${entry.target.id}"]`);
                if(activeLink) activeLink.classList.add("active");
            }
        });
    }, { threshold: 0.5 });
    headings.forEach(h => observer.observe(h));

    // Lightbox Logic
    const lightbox = document.getElementById("imageLightbox");
    const lbImg = document.getElementById("img01");
    const lbCap = document.getElementById("caption");
    
    document.querySelectorAll(".zoomable").forEach(img => {
      img.addEventListener("click", () => {
        lightbox.classList.add("open");
        lbImg.src = img.src;
        lbCap.textContent = img.alt;
      });
    });
    
    document.getElementById("lightboxClose").addEventListener("click", () => { lightbox.classList.remove("open"); });
    lightbox.addEventListener("click", (e) => { if(e.target === lightbox) lightbox.classList.remove("open"); });

    // Universal Audio & Haptics Engine
    function playHapticAndSound() {
      if (navigator.vibrate) navigator.vibrate(50);
      try {
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.connect(gain);
        gain.connect(ctx.destination);
        osc.type = 'sine';
        osc.frequency.setValueAtTime(600, ctx.currentTime);
        osc.frequency.exponentialRampToValueAtTime(800, ctx.currentTime + 0.1);
        gain.gain.setValueAtTime(0.2, ctx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.1);
        osc.start(ctx.currentTime);
        osc.stop(ctx.currentTime + 0.1);
      } catch(e) {}
    }

    // Anchored Particle Engine
    function popConfettiAnchored(triggerElement) {
      const emojis = ['‚ö°', 'üöÄ', 'üí°', 'üß¨', '‚öôÔ∏è'];
      const rect = triggerElement.getBoundingClientRect();
      const centerX = rect.left + (rect.width / 2);
      const centerY = rect.top + (rect.height / 2);

      for(let i = 0; i < 12; i++) {
        let el = document.createElement('div');
        el.innerText = emojis[Math.floor(Math.random() * emojis.length)];
        el.className = 'floating-emoji';
        el.style.left = centerX + 'px';
        el.style.top = centerY + 'px';
        el.style.fontSize = (Math.random() * 15 + 15) + 'px';
        document.body.appendChild(el);
        
        requestAnimationFrame(() => {
          const angle = Math.random() * Math.PI * 2;
          const distance = Math.random() * 120 + 40;
          const tx = Math.cos(angle) * distance;
          const ty = Math.sin(angle) * distance - 50; 
          el.style.transform = `translate(${tx}px, ${ty}px) rotate(${Math.random() * 360}deg) scale(${Math.random() + 0.5})`;
          el.style.opacity = '0';
        });
        setTimeout(() => el.remove(), 1000);
      }
    }    
    
    // Streaming-Safe Markdown Parser (With Copy Button)
    function renderMarkdown(text) {
        let formatted = text;
        
        const tickCount = (formatted.match(/```/g) || []).length;
        if (tickCount % 2 !== 0) {
            formatted += '\n```'; 
        }

        formatted = formatted.replace(/```[a-z]*\n([\s\S]*?)```/gi, '<div class="code-wrapper"><button class="copy-code-btn" title="Copy Code"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button><pre><code>$1</code></pre></div>');
        formatted = formatted.replace(/`([^`]+)`/g, '<code>$1</code>');
        formatted = formatted.replace(/\*\*(.*?)\*\*/g, '<b>$1</b>');
        formatted = formatted.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank">$1</a>');
        formatted = formatted.replace(/^\s*[\*\-]\s+(.*)/gm, '‚Ä¢ $1');

        let parts = formatted.split(/(<div class="code-wrapper">[\s\S]*?<\/div>)/);
        for(let i = 0; i < parts.length; i++) {
            if(!parts[i].startsWith('<div')) {
                parts[i] = parts[i].replace(/\n\n/g, '<br><br>').replace(/\n/g, '<br>');
            }
        }
        return parts.join('');
    }

    // ==========================================
    //  MULTI-MODAL AGENT (Consulting + Simulator)
    // ==========================================
    const trigger = document.getElementById('agentTrigger');
    const windowEl = document.getElementById('agentWindow');
    const closeBtn = document.getElementById('agentClose');
    const chatArea = document.getElementById('chatArea');
    const input = document.getElementById('chatInput');
    const sendBtn = document.getElementById('sendBtn');

    if(trigger) {
        trigger.addEventListener('click', () => { windowEl.classList.add('active'); input.focus(); });
        closeBtn.addEventListener('click', () => windowEl.classList.remove('active'));
    }

    // Event Delegation for Copy Buttons
    if(chatArea) {
      chatArea.addEventListener('click', async (e) => {
          const btn = e.target.closest('.copy-code-btn');
          if (!btn) return;
          
          const codeBlock = btn.nextElementSibling;
          if (!codeBlock) return;
          
          const codeText = codeBlock.textContent;
          
          try {
              await navigator.clipboard.writeText(codeText);
              const originalHTML = btn.innerHTML;
              btn.innerHTML = '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#34D399" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>';
              btn.style.borderColor = '#34D399';
              btn.style.background = 'rgba(52, 211, 153, 0.1)';
              
              setTimeout(() => {
                  btn.innerHTML = originalHTML;
                  btn.style.borderColor = '';
                  btn.style.background = '';
              }, 2000);
          } catch (err) {
              console.error('Failed to copy text: ', err);
          }
      });
    }

    // Exported click handlers for UI buttons
    window.triggerSimulation = function() {
        input.value = "Run R&D Strategy Simulator";
        handleMessage();
    };
    
    window.triggerChat = function(query) {
        input.value = query;
        handleMessage();
    };

    // Track conversation for simulator context
    let lastAiMessage = "";

    const luatContext = `SYSTEM INSTRUCTIONS: You are Virtual L.U.A.T, the digital consultant avatar for Luat (Luke) Nguyen.

    CONTEXT (Consulting Offerings - The G.I.F.T Model):
    - G (Growth): Capital strategy, investor readiness, 1.5% - 3.5% success fee models for biotech ventures.
    - I (Informatics): Scientific informatics, AI-driven R&D, data governance (GxP, HIPAA).
    - F (Future-Ready IT): Cloud/hybrid R&D infrastructure, digital transformation, agile product management.
    - T (Technology): Computational drug discovery, cybersecurity, scalable AI/ML infrastructure.
    - Background: Inventor with patents in biosensors, calcium ion channels, and TrkA inhibitors.

    SIMULATOR MODE LOGIC:
    If the user asks to "Run R&D Strategy Simulator":
    1. Present a brief, high-stakes biotech scenario.
    2. Offer exactly 2 distinct strategic choices (A or B).
    If the user replies with "A" or "B":
    1. Read the "AI's previous message" below to understand what A and B were.
    2. Evaluate their specific choice using Luat's GIFT framework.
    3. State the business outcome (e.g., burn rate impact or time-to-market).
    4. Immediately present the next scenario with 2 new choices.

    STRICT RULES:
    1. Persona: Professional, strategic. Use first-person ("I", "my team").
    2. Length: Keep answers extremely punchy. Strictly 4 sentences maximum.
    3. Code Generation: You MAY generate code ONLY if it is directly relevant to Luat's core skills.
    4. AI Strategy Query: If the user asks "What is your AI strategy?", explain your strategy and explicitly instruct them to visit the webpage of Blueprint AI Partners at [Blueprint AI Partners](https://blueprintaipartners.com/).
    `;

    async function handleMessage() {
      const text = input.value.trim();
      if(!text) return;

      const limitKey = "luat_ai_usage";
      const maxQuestions = 6; 
      const today = new Date().toLocaleDateString();
      let usage = JSON.parse(localStorage.getItem(limitKey)) || { count: 0, date: today };

      if (usage.date !== today) usage = { count: 0, date: today };

      if (usage.count >= maxQuestions) {
        const limitMsg = document.createElement('div');
        limitMsg.className = 'msg msg-bot';
        limitMsg.innerHTML = `I have reached my daily limit to conserve resources. Please reach out to Luat directly via <a href='https://www.linkedin.com/in/1u477n/' target='_blank' style='color: var(--a1); font-weight: bold;'>LinkedIn</a> to continue the conversation.`;
        chatArea.appendChild(limitMsg);
        chatArea.scrollTop = chatArea.scrollHeight;
        input.value = '';
        return; 
      }
      
      const userMsg = document.createElement('div');
      userMsg.className = 'msg msg-user';
      userMsg.textContent = text;
      chatArea.appendChild(userMsg);
      input.value = '';
      
      // Trigger the neon glow
      windowEl.classList.add('is-thinking');
      chatArea.scrollTop = chatArea.scrollHeight;

      usage.count++;
      localStorage.setItem(limitKey, JSON.stringify(usage));

      const botMsg = document.createElement('div');
      botMsg.className = 'msg msg-bot';
      botMsg.innerHTML = "<div class='typing-indicator'><span class='typing-dot'></span><span class='typing-dot'></span><span class='typing-dot'></span></div>";
      chatArea.appendChild(botMsg);
      chatArea.scrollTop = chatArea.scrollHeight;

      try {
        let fullPrompt = luatContext;
        if (lastAiMessage !== "") {
            fullPrompt += `\n\nAI's previous message to user: "${lastAiMessage}"`;
        }
        fullPrompt += `\n\nUser's current reply: "${text}"`;

        const response = await fetch('https://imaginative-squirrel-aa8082.netlify.app/api/chat', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ prompt: fullPrompt })
        });

        if (!response.ok) throw new Error(`HTTP Error ${response.status}`);

        const reader = response.body.getReader();
        const decoder = new TextDecoder("utf-8");
        
        let hasStarted = false;
        let charQueue = [];
        let isStreamDone = false;
        let displayedText = "";
        
        // --- HIGH PERFORMANCE TYPEWRITER ---
        function typewriterEffect() {
            if (charQueue.length > 0) {
                let charsPerFrame = 1;
                if (charQueue.length > 20) charsPerFrame = 2;
                if (charQueue.length > 50) charsPerFrame = 4;

                for (let i = 0; i < charsPerFrame; i++) {
                    if (charQueue.length > 0) {
                        displayedText += charQueue.shift();
                    }
                }

                let formatted = renderMarkdown(displayedText);
                
                botMsg.innerHTML = formatted;
                chatArea.scrollTop = chatArea.scrollHeight;
                requestAnimationFrame(typewriterEffect);
                
            } else if (!isStreamDone) {
                requestAnimationFrame(typewriterEffect);
            } else {
                // Stream complete
                lastAiMessage = displayedText; // Save for simulator context
                windowEl.classList.remove('is-thinking');
                chatArea.style.scrollBehavior = 'smooth';
                
                // Trigger effects if AI gave an enthusiastic response or redirect
                if (displayedText.includes('!') || displayedText.includes('Blueprint')) {
                  popConfettiAnchored(botMsg);
                }
            }
        }

        while (true) {
          const { done, value } = await reader.read();
          if (done) {
              isStreamDone = true;
              break;
          }
          
          const chunk = decoder.decode(value, { stream: true });
          const lines = chunk.split('\n');
          
          for (const line of lines) {
            const trimmedLine = line.trim();
            if (!trimmedLine || trimmedLine === 'data: [DONE]') continue;
            
            if (trimmedLine.startsWith("data: ")) {
                try {
                    const json = JSON.parse(trimmedLine.substring(6));
                    if (json.candidates && json.candidates[0].content) {
                        const newText = json.candidates[0].content.parts[0].text;
                        
                        if (!hasStarted) {
                            hasStarted = true;
                            botMsg.innerHTML = ""; 
                            windowEl.classList.remove('is-thinking');
                            chatArea.style.scrollBehavior = 'auto'; 
                            playHapticAndSound(); // Ping!
                            requestAnimationFrame(typewriterEffect);
                        }
                        
                        charQueue.push(...newText.split(''));
                    }
                } catch (e) {}
            }
          }
        }

      } catch (error) {
        console.error("Error:", error);
        usage.count--;
        localStorage.setItem(limitKey, JSON.stringify(usage));
        botMsg.innerHTML = "<span style='color: #fb4934;'><b>System Error:</b> " + error.message + "</span>";
        windowEl.classList.remove('is-thinking');
      }
      chatArea.scrollTop = chatArea.scrollHeight;
    }

    if(sendBtn) sendBtn.addEventListener('click', handleMessage);
    if(input) input.addEventListener('keypress', (e) => { if(e.key === 'Enter') handleMessage(); });
  </script>
</body></html>
