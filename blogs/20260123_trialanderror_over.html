<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="description" content='The ‚Äútrial and error‚Äù era of medicine is over. How AlphaFold and AI-native R&D are reshaping drug discovery‚Äîfrom target validation to in silico screening and precision lead optimization.' />
  
  <link rel="canonical" href="https://1u477n.github.io/blogs/20260123_trialanderror_over.html" />
  
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://1u477n.github.io/blogs/20260123_trialanderror_over.html">
  <meta property="og:title" content="The Trial-and-Error Era Is Over: The AI Blueprint for Drug Discovery">
  <meta property="og:description" content='AlphaFold isn‚Äôt just a tool‚Äîit‚Äôs the connective tissue of AI-native drug discovery. Target validation, in silico screening, and precision engineering‚Äîat near-atomic accuracy.'>
  <meta property="og:image" content="https://1u477n.github.io/images/datalifecycle_AF3_IT.jpeg">
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="The Trial-and-Error Era Is Over: The AI Blueprint for Drug Discovery">
  <meta name="twitter:description" content='AlphaFold isn‚Äôt just a tool‚Äîit‚Äôs the connective tissue of AI-native drug discovery. Target validation, in silico screening, and precision engineering‚Äîat near-atomic accuracy.'>
  <meta name="twitter:image" content="https://1u477n.github.io/images/datalifecycle_AF3_IT.jpeg">
  
  <meta name="color-scheme" content="light dark" />
  <meta name="theme-color" content="#070A12" id="themeColor">

  <script>
    (function () {
      const root = document.documentElement;
      const storageKey = "theme";
      const media = window.matchMedia("(prefers-color-scheme: light)");
      let saved = null;
      try { saved = localStorage.getItem(storageKey); } catch {}
      const theme = (saved === "light" || saved === "dark") ? saved : (media.matches ? "light" : "dark");
      root.setAttribute("data-theme", theme);
      const meta = document.getElementById("themeColor");
      if (meta) meta.setAttribute("content", theme === "dark" ? "#070A12" : "#ffffff");
    })();
  </script>

  <title>The Trial-and-Error Era Is Over: The AI Blueprint for Drug Discovery</title>

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-VW323NJP26"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-VW323NJP26');
  </script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <link rel="preload" as="image" href="https://1u477n.github.io/images/datalifecycle_AF3_IT.jpeg" />

  <style>
    :root{
      /* Base (dark) tokens */
      --bg0:#070A12; --bg1:#0B1020;
      --text:#EAF0FF; --muted: rgba(234,240,255,.72); --muted2: rgba(234,240,255,.55);
      --panel: rgba(255,255,255,.06); --panel2: rgba(255,255,255,.08);
      --stroke: rgba(255,255,255,.10); --stroke2: rgba(255,255,255,.16);
      --a1:#38BDF8; --a2:#A78BFA; --a3:#34D399;
      --grad: linear-gradient(135deg, var(--a1), var(--a2));
      --shadow: 0 0 0 1px var(--stroke), 0 18px 60px rgba(0,0,0,.55);
      --shadow2: 0 0 0 1px var(--stroke), 0 22px 80px rgba(0,0,0,.62);
      --ring: 0 0 0 2px rgba(56,189,248,.55);
      --r12: 12px; --r16: 16px; --r20: 20px; --r24: 24px;
      --max: 1100px;
      --glow1: rgba(56,189,248,.18); --glow2: rgba(167,139,250,.16); --glow3: rgba(52,211,153,.10);
      --gridline: rgba(255,255,255,.06); --gridmask: rgba(0,0,0,.85); --vignette: rgba(255,255,255,.06);
      --topbarA: rgba(7,10,18,.88); --topbarB: rgba(7,10,18,.55);
      --menuBg: rgba(8,12,22,.78); --menuShadow: 0 30px 80px rgba(0,0,0,.55);
      --tableBg: rgba(255,255,255,.03); --tableRow: rgba(255,255,255,.04); --tableRow2: rgba(255,255,255,.025);
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg0:#ffffff; --bg1:#f6f8ff;
        --text:#0b0f1a; --muted: rgba(11,15,26,.74); --muted2: rgba(11,15,26,.58);
        --panel: rgba(255,255,255,.72); --panel2: rgba(255,255,255,.86);
        --stroke: rgba(0,0,0,.10); --stroke2: rgba(0,0,0,.14);
        --shadow: 0 0 0 1px rgba(0,0,0,.08), 0 18px 60px rgba(0,0,0,.10);
        --shadow2: 0 0 0 1px rgba(0,0,0,.08), 0 22px 80px rgba(0,0,0,.12);
        --ring: 0 0 0 2px rgba(56,189,248,.45);
        --glow1: rgba(56,189,248,.14); --glow2: rgba(167,139,250,.12); --glow3: rgba(52,211,153,.08);
        --gridline: rgba(0,0,0,.06); --gridmask: rgba(0,0,0,.55); --vignette: rgba(0,0,0,.06);
        --topbarA: rgba(255,255,255,.88); --topbarB: rgba(255,255,255,.65);
        --menuBg: rgba(255,255,255,.86); --menuShadow: 0 30px 80px rgba(0,0,0,.14);
        --tableBg: rgba(0,0,0,.03); --tableRow: rgba(0,0,0,.03); --tableRow2: rgba(0,0,0,.02);
      }
    }
    html[data-theme="light"]{
      color-scheme: light;
      --bg0:#ffffff; --bg1:#f6f8ff;
      --text:#0b0f1a; --muted: rgba(11,15,26,.74); --muted2: rgba(11,15,26,.58);
      --panel: rgba(255,255,255,.72); --panel2: rgba(255,255,255,.86);
      --stroke: rgba(0,0,0,.10); --stroke2: rgba(0,0,0,.14);
      --shadow: 0 0 0 1px rgba(0,0,0,.08), 0 18px 60px rgba(0,0,0,.10);
      --shadow2: 0 0 0 1px rgba(0,0,0,.08), 0 22px 80px rgba(0,0,0,.12);
      --ring: 0 0 0 2px rgba(56,189,248,.45);
      --glow1: rgba(56,189,248,.14); --glow2: rgba(167,139,250,.12); --glow3: rgba(52,211,153,.08);
      --gridline: rgba(0,0,0,.06); --gridmask: rgba(0,0,0,.55); --vignette: rgba(0,0,0,.06);
      --topbarA: rgba(255,255,255,.88); --topbarB: rgba(255,255,255,.65);
      --menuBg: rgba(255,255,255,.86); --menuShadow: 0 30px 80px rgba(0,0,0,.14);
      --tableBg: rgba(0,0,0,.03); --tableRow: rgba(0,0,0,.03); --tableRow2: rgba(0,0,0,.02);
    }
    html[data-theme="dark"]{
      color-scheme: dark;
      --bg0:#070A12; --bg1:#0B1020;
      --text:#EAF0FF; --muted: rgba(234,240,255,.72); --muted2: rgba(234,240,255,.55);
      --panel: rgba(255,255,255,.06); --panel2: rgba(255,255,255,.08);
      --stroke: rgba(255,255,255,.10); --stroke2: rgba(255,255,255,.16);
      --shadow: 0 0 0 1px var(--stroke), 0 18px 60px rgba(0,0,0,.55);
      --shadow2: 0 0 0 1px var(--stroke), 0 22px 80px rgba(0,0,0,.62);
      --ring: 0 0 0 2px rgba(56,189,248,.55);
      --glow1: rgba(56,189,248,.18); --glow2: rgba(167,139,250,.16); --glow3: rgba(52,211,153,.10);
      --gridline: rgba(255,255,255,.06); --gridmask: rgba(0,0,0,.85); --vignette: rgba(255,255,255,.06);
      --topbarA: rgba(7,10,18,.88); --topbarB: rgba(7,10,18,.55);
      --menuBg: rgba(8,12,22,.78); --menuShadow: 0 30px 80px rgba(0,0,0,.55);
      --tableBg: rgba(255,255,255,.03); --tableRow: rgba(255,255,255,.04); --tableRow2: rgba(255,255,255,.025);
    }

    *{ box-sizing:border-box }
    html,body{ height:100% }
    html{ scroll-behavior: smooth; text-rendering: geometricPrecision; -webkit-text-size-adjust: 100%; }
    body{ margin:0; font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; color: var(--text); background: radial-gradient(1200px 700px at 10% 0%, var(--glow1), transparent 55%), radial-gradient(1000px 600px at 90% 10%, var(--glow2), transparent 55%), radial-gradient(900px 600px at 50% 110%, var(--glow3), transparent 60%), linear-gradient(180deg, var(--bg0), var(--bg1)); overflow-x:hidden; padding-bottom: 40px; transition: background .3s ease; }
    
    ::selection{ background: rgba(56,189,248,.22); color: var(--text); }
    .skip-link{ position: absolute; top: 10px; left: 10px; z-index: 9999; padding: 10px 12px; border-radius: 12px; background: var(--panel2); border: 1px solid var(--stroke); color: var(--text); text-decoration: none; transform: translateY(-200%); transition: transform .2s ease; backdrop-filter: blur(10px); }
    .skip-link:focus{ transform: translateY(0); box-shadow: var(--ring); }
    
    .bg-grid{ position: fixed; inset: 0; pointer-events:none; opacity:.25; background-image: linear-gradient(var(--gridline) 1px, transparent 1px), linear-gradient(90deg, var(--gridline) 1px, transparent 1px); background-size: 54px 54px; mask-image: radial-gradient(700px 400px at 50% 12%, var(--gridmask), transparent 70%); z-index: 0; }
    .top-vignette{ position: fixed; top: 0; left: 0; right: 0; height: 220px; pointer-events:none; background: radial-gradient(800px 180px at 50% 0%, var(--vignette), transparent 70%); opacity: .8; z-index: 1; }
    
    .container{ max-width:var(--max); margin:0 auto; padding: 18px; position: relative; z-index: 2; transition: max-width .3s ease; }
    
    .panel{ position: relative; overflow: hidden; }
    .panel:after{ content:""; position:absolute; inset:0; pointer-events:none; border-radius: inherit; padding: 1px; background: linear-gradient(135deg, rgba(56,189,248,.34), rgba(167,139,250,.28), rgba(52,211,153,.18), rgba(255,255,255,.06)); -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite: xor; mask-composite: exclude; opacity: .55; }
    
    .topbar { position: sticky; top: 0; z-index: 80; padding: 10px 0; backdrop-filter: blur(14px); background: linear-gradient(180deg, var(--topbarA), var(--topbarB)); border-bottom: 1px solid rgba(255,255,255,.02); transition: transform .3s ease, opacity .3s ease; }
    .nav { display: flex; align-items: center; justify-content: space-between; gap: 14px; max-width: var(--max); margin: 0 auto; padding: 0 18px; }
    
    .progress { height: 3px; width: 100%; background: transparent; position: absolute; bottom: 0; left: 0; }
    .progress > span { display: block; height: 100%; width: 0%; background: var(--grad); transform-origin: left center; }
    
    .brand{ display:flex; align-items:center; gap: 10px; min-width: 0; }
    .brand .title{ display:flex; flex-direction:column; line-height:1.1; min-width: 0; }
    .brand .title strong{ font-size: 14px; letter-spacing: .2px; white-space: nowrap; overflow:hidden; text-overflow: ellipsis; }
    .brand .title span{ font-size: 12px; color: var(--muted2); white-space: nowrap; overflow:hidden; text-overflow: ellipsis; }
    
    .mark{ width: 34px; height: 34px; border-radius: 50%; background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.35), rgba(255,255,255,.05) 55%), var(--grad); box-shadow: 0 12px 28px rgba(56,189,248,.12); border: 1px solid rgba(255,255,255,.14); position: relative; overflow:hidden; flex: 0 0 auto; isolation: isolate; }
    .mark:after{ content:""; position:absolute; inset:-40%; background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.55), transparent 45%), linear-gradient(90deg, transparent 20%, rgba(255,255,255,.10), transparent 80%); transform: rotate(18deg); opacity:.55; z-index: 0; pointer-events:none; }
    .mark.theme-toggle{ appearance:none; -webkit-appearance:none; padding: 0; margin: 0; cursor: pointer; display: grid; place-items: center; color: var(--text); transition: transform .15s ease, box-shadow .2s ease, border-color .2s ease; }
    .mark.theme-toggle svg{ width: 18px; height: 18px; position: relative; z-index: 1; display: block; pointer-events: none; opacity: .92; filter: drop-shadow(0 10px 18px rgba(0,0,0,.18)); }
    .mark.theme-toggle:hover{ transform: translateY(-1px); }
    .mark.theme-toggle:active{ transform: translateY(0) scale(.99); }
    .mark.theme-toggle:focus-visible{ outline:none; box-shadow: var(--ring), 0 12px 28px rgba(56,189,248,.12); }
    html[data-theme="dark"] .mark.theme-toggle .sun{ display:none; } html[data-theme="light"] .mark.theme-toggle .moon{ display:none; }
    @media (prefers-color-scheme: dark){ html:not([data-theme]) .mark.theme-toggle .sun{ display:none; } }
    @media (prefers-color-scheme: light){ html:not([data-theme]) .mark.theme-toggle .moon{ display:none; } }
    .nav-actions{ display:flex; align-items:center; gap: 10px; }
    .icon-btn{ width: 42px; height: 42px; display:grid; place-items:center; border-radius: 14px; border: 1px solid rgba(255,255,255,.12); background: rgba(255,255,255,.06); cursor:pointer; transition: transform .15s ease, border-color .2s ease, background .2s ease, box-shadow .2s ease; backdrop-filter: blur(10px); color: var(--text); }
    .icon-btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.20); background: rgba(255,255,255,.085); box-shadow: 0 14px 30px rgba(0,0,0,.25); }
    .icon-btn:active{ transform: translateY(0) scale(.99); }
    .icon-btn:focus-visible{ outline:none; box-shadow: var(--ring); }
    .icon{ width: 18px; height: 14px; position: relative; }
    .icon span{ position:absolute; left:0; right:0; height:2px; border-radius: 2px; background: rgba(234,240,255,.90); }
    .icon span:nth-child(1){ top:0; } .icon span:nth-child(2){ top:6px; opacity:.85; } .icon span:nth-child(3){ top:12px; opacity:.70; }
    html[data-theme="light"] .icon span{ background: rgba(11,15,26,.86); }
    @media (prefers-color-scheme: light){ html:not([data-theme]) .icon span{ background: rgba(11,15,26,.86); } }
    .menu{ position: fixed; top: 70px; right: 18px; width: min(360px, calc(100vw - 36px)); border-radius: 18px; background: var(--menuBg); border: 1px solid rgba(255,255,255,.12); box-shadow: var(--menuShadow); backdrop-filter: blur(16px); padding: 10px; display:none; z-index: 60; }
    .menu.open{ display:block; animation: pop .16s ease-out; }
    @keyframes pop{ from{ transform: translateY(-6px); opacity: 0;} to{ transform: translateY(0); opacity: 1;} }
    .menu a{ display:flex; align-items:center; justify-content: space-between; gap: 10px; text-decoration:none; color: var(--text); padding: 12px 12px; border-radius: 14px; border: 1px solid transparent; transition: background .2s ease, border-color .2s ease; font-weight: 600; font-size: 13px; }
    .menu a:hover{ background: rgba(255,255,255,.06); border-color: rgba(255,255,255,.10); }
    .menu a .arrow-icon{ color: var(--muted2); font-size: 16px; line-height: 1; font-family: "Segoe UI Symbol", system-ui, sans-serif; }
    .arrow-icon .arrow-svg{ width: 18px; height: 18px; display:block; }
    html[data-theme="light"] .mark{ border: 1px solid rgba(0,0,0,.10); }
    html[data-theme="light"] .icon-btn{ border: 1px solid rgba(0,0,0,.12); background: rgba(255,255,255,.70); }
    html[data-theme="light"] .icon-btn:hover{ border-color: rgba(0,0,0,.18); background: rgba(255,255,255,.85); box-shadow: 0 14px 30px rgba(0,0,0,.12); }
    html[data-theme="light"] .menu{ border: 1px solid rgba(0,0,0,.12); }
    html[data-theme="light"] .menu a:hover{ background: rgba(0,0,0,.04); border-color: rgba(0,0,0,.08); }
    @media (prefers-color-scheme: light){
      html:not([data-theme]) .mark{ border: 1px solid rgba(0,0,0,.10); }
      html:not([data-theme]) .icon-btn{ border: 1px solid rgba(0,0,0,.12); background: rgba(255,255,255,.70); }
      html:not([data-theme]) .icon-btn:hover{ border-color: rgba(0,0,0,.18); background: rgba(255,255,255,.85); box-shadow: 0 14px 30px rgba(0,0,0,.12); }
      html:not([data-theme]) .menu{ border: 1px solid rgba(0,0,0,.12); }
      html:not([data-theme]) .menu a:hover{ background: rgba(0,0,0,.04); border-color: rgba(0,0,0,.08); }
    }
    .hero{ margin-top: 18px; padding: 24px; border-radius: var(--r24); background: radial-gradient(900px 340px at 20% 0%, rgba(56,189,248,.16), transparent 50%), radial-gradient(900px 340px at 80% 0%, rgba(167,139,250,.14), transparent 55%), var(--panel); border: 1px solid var(--stroke); box-shadow: var(--shadow2); }
    .kicker{ display:inline-flex; align-items:center; gap: 10px; padding: 8px 10px; border-radius: 999px; border: 1px solid rgba(56,189,248,.22); background: rgba(56,189,248,.08); color: color-mix(in srgb, var(--text) 92%, transparent); font-weight: 800; font-size: 12px; letter-spacing: .2px; }
    .kicker i{ width: 8px; height: 8px; border-radius: 99px; background: var(--grad); display:inline-block; box-shadow: 0 0 0 4px rgba(56,189,248,.10); }
    h1{ margin: 14px 0 10px; font-size: clamp(26px, 4.2vw, 42px); letter-spacing: -0.02em; line-height: 1.08; }
    .grad-text{ background: var(--grad); -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent; }
    .lead{ margin: 0; color: var(--muted); font-size: 15px; line-height: 1.8; max-width: 92ch; }
    
    .meta-row{ display:flex; flex-wrap: wrap; gap: 10px; margin-top: 16px; align-items: center; }
    .pill{ border-radius: 999px; border: 1px solid var(--stroke); background: rgba(255,255,255,.04); padding: 9px 12px; font-size: 12px; color: var(--muted); display:inline-flex; align-items:center; gap: 8px; }
    .pill b{ color: color-mix(in srgb, var(--text) 92%, transparent); font-weight: 800; }
    
    /* NEW: Reading Clock Icon */
    .read-icon{ width: 14px; height: 14px; display:block; fill:none; stroke:currentColor; stroke-width:2; stroke-linecap:round; stroke-linejoin:round; }

    /* Interactive Pills */
    .icon-pill{ width: 34px; height: 34px; padding:0; display:grid; place-items:center; cursor:pointer; color: var(--muted); transition: color .2s ease, background .2s ease, transform .15s ease; border: 1px solid var(--stroke); background: rgba(255,255,255,.04); }
    .icon-pill:hover{ color: var(--text); background: rgba(255,255,255,.08); transform: translateY(-1px); }
    .icon-pill:active{ transform: scale(.97); }
    .icon-pill svg{ width: 16px; height: 16px; display:block; fill:none; stroke:currentColor; stroke-width:2; stroke-linecap:round; stroke-linejoin:round; }
    
    /* ZEN MODE CSS */
    body.zen-mode .topbar, body.zen-mode .footer, body.zen-mode .related-section, body.zen-mode .toc { display: none !important; }
    body.zen-mode .container { max-width: 720px; }
    body.zen-mode .content-grid { grid-template-columns: 1fr; }
    body.zen-mode .icon-pill#zenBtn { color: #38BDF8; border-color: #38BDF8; background: rgba(56,189,248,.15); }

    /* SIGNAL MODE CSS */
    body.signal-mode .prose p { color: transparent; text-shadow: 0 0 10px rgba(100,100,100,0.5); opacity: 0.5; transition: all 0.4s ease; }
    body.signal-mode .prose .ai-signal { 
        color: var(--text); 
        opacity: 1; 
        text-shadow: none;
        background: linear-gradient(90deg, rgba(56,189,248,0.1), rgba(167,139,250,0.1));
        box-shadow: 0 0 0 2px rgba(56,189,248,0.1);
        border-radius: 4px;
        padding: 2px 0;
        font-weight: 500;
    }
    body.signal-mode .icon-pill#signalBtn { color: #A78BFA; border-color: #A78BFA; background: rgba(167,139,250,.15); }
    
    .like-pill{ user-select:none; }
    .like-btn{ display:inline-flex; align-items:center; justify-content:center; width: 18px; height: 18px; cursor: pointer; }
    .like-btn .heart-svg{ width: 18px; height: 18px; display:block; }
    .like-btn .heart-fill{ fill: transparent; transition: fill .18s ease; }
    .like-btn.liked{ color: #ef4444; }
    .like-btn.liked .heart-fill{ fill: currentColor; }
    .like-count{ font-weight: 800; font-size: 12px; line-height: 1; }
    .like-btn:focus-visible{ outline:none; box-shadow: var(--ring); border-radius: 10px; }
    
    .content-grid{ margin-top: 16px; display: grid; grid-template-columns: 1fr; gap: 14px; align-items: start; transition: all .4s ease; }
    @media (min-width: 980px){ .content-grid{ grid-template-columns: 1fr 320px; } .toc{ position: sticky; top: 110px; } .toc details{ open: true; } .toc summary{ display:none; } .toc details[open] > summary{ display:none; } }
    .post{ border-radius: var(--r24); border: 1px solid var(--stroke); background: rgba(255,255,255,.04); box-shadow: var(--shadow); padding: 22px; min-width: 0; }
    .prose{ max-width: 90ch; }
    .prose p{ margin: 0 0 14px; color: var(--muted); font-size: 14px; line-height: 1.9; transition: color .3s ease, opacity .3s ease; }
    .prose h2{ margin: 18px 0 10px; font-size: 16px; letter-spacing: -.01em; color: color-mix(in srgb, var(--text) 94%, transparent); scroll-margin-top: 120px; }
    .prose h3{ margin: 16px 0 8px; font-size: 14px; letter-spacing: -.01em; color: color-mix(in srgb, var(--text) 94%, transparent); scroll-margin-top: 120px; }
    .prose strong{ color: color-mix(in srgb, var(--text) 94%, transparent); font-weight: 800; }
    .prose a{ color: color-mix(in srgb, var(--a1) 85%, white); text-decoration: none; border-bottom: 1px solid rgba(56,189,248,.35); }
    .prose a:hover{ border-bottom-color: rgba(56,189,248,.65); }
    .divider{ height: 1px; background: color-mix(in srgb, var(--stroke) 90%, transparent); margin: 18px 0; }
    figure{ margin: 16px 0; border-radius: var(--r20); border: 1px solid var(--stroke); background: rgba(0,0,0,.14); overflow:hidden; box-shadow: 0 0 0 1px rgba(255,255,255,.06), 0 18px 60px rgba(0,0,0,.45); }
    html[data-theme="light"] figure{ background: rgba(255,255,255,.75); }
    @media (prefers-color-scheme: light){ html:not([data-theme]) figure{ background: rgba(255,255,255,.75); } }
    figure img{ width: 100%; display:block; aspect-ratio: 16 / 9; object-fit: cover; cursor: zoom-in; filter: saturate(1.04) contrast(1.02); }
    figcaption{ padding: 12px 14px 14px; color: var(--muted2); font-size: 12px; line-height: 1.6; }
    .callout{ margin-top: 16px; border-radius: var(--r20); border: 1px solid rgba(56,189,248,.18); background: radial-gradient(600px 260px at 0% 0%, rgba(56,189,248,.14), transparent 55%), rgba(255,255,255,.045); box-shadow: 0 0 0 1px rgba(56,189,248,.08) inset; padding: 16px; }
    .callout h3{ margin: 0 0 6px; font-size: 14px; letter-spacing: -.01em; }
    .callout p{ margin: 0; color: var(--muted); font-size: 13px; line-height: 1.75; }
    .toc{ border-radius: var(--r24); border: 1px solid var(--stroke); background: rgba(255,255,255,.03); box-shadow: var(--shadow); padding: 14px; }
    .toc details{ border-radius: 16px; }
    .toc summary{ cursor: pointer; user-select:none; list-style: none; font-weight: 800; font-size: 13px; color: color-mix(in srgb, var(--text) 92%, transparent); padding: 8px 10px; border-radius: 14px; border: 1px solid rgba(255,255,255,.10); background: rgba(255,255,255,.04); }
    .toc summary::-webkit-details-marker{ display:none; }
    .toc-nav{ margin-top: 10px; display: grid; gap: 6px; }
    .toc-nav a{ text-decoration: none; color: var(--muted); font-size: 12px; line-height: 1.4; padding: 8px 10px; border-radius: 12px; border: 1px solid transparent; transition: background .2s ease, border-color .2s ease; }
    .toc-nav a:hover{ background: rgba(255,255,255,.05); border-color: rgba(255,255,255,.10); }
    .toc-nav a.active{ color: color-mix(in srgb, var(--text) 92%, transparent); background: linear-gradient(135deg, rgba(56,189,248,.10), rgba(167,139,250,.08)); border-color: rgba(56,189,248,.25); box-shadow: 0 0 0 1px rgba(56,189,248,.10) inset; }
    .toc-nav a[data-level="3"]{ padding-left: 18px; }
    .lightbox{ display:none; position:fixed; inset:0; z-index: 2000; background-color: rgba(7,10,18,.92); backdrop-filter: blur(10px); align-items:center; justify-content:center; flex-direction: column; padding: 20px; }
    html[data-theme="light"] .lightbox{ background-color: rgba(255,255,255,.92); }
    @media (prefers-color-scheme: light){ html:not([data-theme]) .lightbox{ background-color: rgba(255,255,255,.92); } }
    .lightbox.open{ display:flex; }
    .lightbox-content{ max-width: min(1100px, 96vw); max-height: 78vh; object-fit: contain; border-radius: 16px; box-shadow: 0 40px 120px rgba(0,0,0,.7); border: 1px solid var(--stroke); animation: zoom .18s ease-out; background: rgba(0,0,0,.08); }
    .caption{ max-width: min(900px, 92vw); margin-top: 14px; color: color-mix(in srgb, var(--text) 80%, transparent); font-size: 13px; line-height: 1.55; text-align: center; }
    .lightbox-actions{ display: flex; gap: 10px; position: absolute; top: calc(14px + env(safe-area-inset-top)); right: calc(14px + env(safe-area-inset-right)); left: auto; }
    .lb-btn{ width: 46px; height: 46px; border-radius: 16px; border: 1px solid rgba(255,255,255,.14); background: rgba(255,255,255,.06); border-color: rgba(56,189,248,.35); box-shadow: 0 16px 40px rgba(0,0,0,.25); display:grid; place-items:center; cursor:pointer; transition: transform .15s ease, background .2s ease, border-color .2s ease, box-shadow .2s ease; color: color-mix(in srgb, var(--text) 92%, transparent); font-size: 18px; font-weight: 900; }
    .lb-btn:hover{ transform: translateY(-1px); border-color: rgba(56,189,248,.35); background: rgba(56,189,248,.10); box-shadow: 0 16px 40px rgba(0,0,0,.25); }
    .lb-btn:focus-visible{ outline:none; box-shadow: var(--ring); }
    @keyframes zoom{ from{ transform: scale(.98); opacity: 0;} to{ transform: scale(1); opacity: 1;} }
    .footer{ margin-top: 16px; padding: 14px 16px; border-radius: var(--r20); border: 1px solid var(--stroke); background: rgba(255,255,255,.03); color: var(--muted2); font-size: 12px; line-height: 1.5; text-align:center; box-shadow: var(--shadow); }
    :focus-visible{ outline: none; box-shadow: var(--ring); border-radius: 12px; }
    @media (prefers-reduced-motion: reduce){ html{ scroll-behavior: auto; } *{ transition: none !important; animation: none !important; } }

    /* Related Grid */
    .related-section{ margin-top: 40px; }
    .related-head{ font-size: 14px; font-weight: 800; color: color-mix(in srgb, var(--text) 90%, transparent); margin-bottom: 14px; }
    .related-grid{ display: grid; grid-template-columns: repeat(2, 1fr); gap: 14px; }
    @media(max-width: 600px){ .related-grid{ grid-template-columns: 1fr; } }
    .rel-card{ display: flex; flex-direction: column; gap: 8px; padding: 16px; border-radius: var(--r20); border: 1px solid var(--stroke); background: rgba(255,255,255,.03); text-decoration: none; transition: transform .2s ease, border-color .2s ease; }
    .rel-card:hover{ transform: translateY(-2px); border-color: rgba(56,189,248,.25); background: rgba(255,255,255,.05); }
    .rel-title{ font-size: 13px; font-weight: 700; color: var(--text); margin:0; line-height: 1.4; }
    .rel-date{ font-size: 11px; color: var(--muted2); }
  </style>
</head>

<body>
  <a class="skip-link" href="#main">Skip to content</a>

  <div class="bg-grid" aria-hidden="true"></div>
  <div class="top-vignette" aria-hidden="true"></div>

  <div class="topbar" role="banner">
    <div class="progress" aria-hidden="true"><span id="progressBar"></span></div>

    <div class="nav" role="navigation" aria-label="Site">
      <div class="brand">
        <button class="mark theme-toggle" id="themeToggle" type="button" aria-label="Toggle theme" title="Toggle theme">
          <svg class="sun" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" stroke="currentColor" stroke-width="2"/>
            <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <svg class="moon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M21 13.2A8.4 8.4 0 0 1 10.8 3a7.6 7.6 0 1 0 10.2 10.2Z"
                  stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
          </svg>
        </button>

        <div class="title">
          <strong>Blog</strong>
          <span>AI + R&amp;D strategy</span>
        </div>
      </div>

      <div class="nav-actions">
        <button class="icon-btn" id="menuBtn" aria-haspopup="true" aria-expanded="false" aria-controls="menuPanel" title="Menu">
          <div class="icon" aria-hidden="true">
            <span></span><span></span><span></span>
          </div>
        </button>
      </div>
    </div>

    <div class="menu" id="menuPanel" aria-label="Menu">
      <a href="https://1u477n.github.io/">Home
        <span class="arrow-icon">
          <svg class="arrow-svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M7 17L17 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M10 7h7v7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
      </a>
      <a href="https://1u477n.github.io/about.html">About Me
        <span class="arrow-icon">
          <svg class="arrow-svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M7 17L17 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M10 7h7v7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
      </a>
      <a href="https://1u477n.github.io/techandstrategyconsulting.html">Technology & Strategy Consulting
        <span class="arrow-icon">
          <svg class="arrow-svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M7 17L17 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M10 7h7v7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
      </a>
      <a href="https://1u477n.github.io/publishedworks.html">Published Works
        <span class="arrow-icon">
          <svg class="arrow-svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M7 17L17 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M10 7h7v7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
      </a>
      <a href="https://1u477n.github.io/workrecognitions.html">Work Recognitions
        <span class="arrow-icon">
          <svg class="arrow-svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M7 17L17 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M10 7h7v7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
      </a>
      <a href="https://1u477n.github.io/blogs/mainpage.html">Blogs
        <span class="arrow-icon">
          <svg class="arrow-svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M7 17L17 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M10 7h7v7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
      </a>
      <a href="https://1u477n.github.io/images/cv.pdf">Curriculum Vitae
        <span class="arrow-icon">
          <svg class="arrow-svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M7 17L17 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M10 7h7v7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
      </a>
      <a href="https://www.linkedin.com/in/1u477n/">LinkedIn
        <span class="arrow-icon">
          <svg class="arrow-svg" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M7 17L17 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M10 7h7v7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
      </a>
    </div>
  </div>

  <div id="imageLightbox" class="lightbox" aria-modal="true" role="dialog" aria-label="Image viewer" aria-hidden="true">
    <div class="lightbox-actions" aria-hidden="false">
      <button class="lb-btn" id="lightboxClose" aria-label="Close">√ó</button>
    </div>
    <img class="lightbox-content" id="img01" alt="" />
    <div id="caption" class="caption"></div>
  </div>

  <main class="container" id="main">
    <section class="hero panel" aria-label="Blog post header">
      <div class="kicker"><i></i> AI-native R&amp;D ¬∑ AlphaFold ¬∑ Drug discovery</div>
      <h1>
        <span class="grad-text">The Trial-and-Error Era</span>
        Is Officially Over üß¨üöÄ
      </h1>
      <p class="lead">
        For decades, discovering a new drug meant searching for a needle in a haystack‚Äîoften without a clear map of the protein
        you were targeting. Today, that changes. AlphaFold and the broader AI Blueprint are moving medicine from slow, expensive
        guesswork to high-fidelity prediction‚Äîturning discovery into a more precise, digital-first engineering loop.
      </p>
      
      <div class="meta-row" aria-label="Post metadata">
        <div class="pill"><b>Author</b> Luat (Luke) Nguyen</div>
        
        <div class="pill"><b>Focus</b> AI-native R&amp;D</div>
        
        <div class="pill"><b>Updated</b> <time id="today" datetime=""></time></div>
        
        <div class="pill" title="Reading Time">
          <svg class="read-icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
          &nbsp;<span id="readTime">‚Äî</span>
        </div>
        
        <div class="pill" id="viewPill"><b>Views</b> <span id="viewCount">‚Äî</span></div>
        
        <div class="pill like-pill">
           <span class="like-btn" title="Like">
             <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path class="heart-fill" d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78Z" fill="transparent"></path></svg>
           </span>
           <span class="like-count">0</span>
        </div>

        <button class="pill icon-pill" id="signalBtn" title="AI Signal Mode (Highlight Key Insights)">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
          </svg>
        </button>

        <button class="pill icon-pill" id="zenBtn" title="Zen Mode (Focus Reading)">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <circle cx="12" cy="12" r="3"></circle>
          </svg>
        </button>
        
        <button class="pill icon-pill" id="shareBtn" title="Share Article">
          <svg class="share-icon" viewBox="0 0 24 24">
            <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
            <polyline points="16 6 12 2 8 6"></polyline>
            <line x1="12" y1="2" x2="12" y2="15"></line>
          </svg>
        </button>
      </div>
    </section>

    <div class="content-grid">
      <article class="post panel" id="post" aria-label="Blog post content">
        <div class="prose" id="prose">
          <p>
            The ‚Äútrial and error‚Äù era of medicine is fading fast‚Äîand not because biology got easier, but because our ability to
            <span class="ai-signal"><strong>see, simulate, and iterate</strong></span> has improved dramatically. When structure becomes accessible, discovery
            stops being a blindfolded hunt and starts looking like a disciplined design process.
          </p>
          <figure class="panel">
            <img class="zoomable"
                 loading="eager" decoding="async"
                 src="https://1u477n.github.io/images/datalifecycle_AF3_IT.jpeg"
                 alt="AI-native preclinical data lifecycle: AlphaFold supports the path from validated target to clinical candidate (click to zoom)." />
            <figcaption>
              <strong>Figure:</strong> AI-native preclinical lifecycle. AlphaFold helps turn early ambiguity into a usable digital map‚Äîaccelerating decisions from ‚ÄúTarget‚Äù to ‚ÄúClinical Candidate.‚Äù (Click to zoom.)
            </figcaption>
          </figure>
          <div class="divider"></div>
          <h2>1) Why ‚ÄúTrial and Error‚Äù Became the Default</h2>
          <p>
            Drug discovery is brutally complex: proteins flex, pockets hide, and subtle changes can flip activity or toxicity.
            Historically, teams spent years and massive budgets on experimental structure determination and labor-intensive
            modeling‚Äîjust to understand the ‚Äúlock‚Äù before designing the ‚Äúkey.‚Äù
          </p>
          <p>
            That long ramp created a culture of incremental iteration: try compounds, learn from failures, refine, repeat. It
            worked‚Äîsometimes‚Äîbut it was slow, expensive, and often non-linear.
          </p>
          <h2>2) Enter the AI Blueprint: AlphaFold as the ‚ÄúConnective Tissue‚Äù</h2>
          <p>
            AlphaFold isn‚Äôt just another tool in the stack. It changes the stack. By generating near-atomic protein structures
            quickly, it turns structural understanding into a default input‚Äînot a rare luxury.
          </p>
          <p>
            Once structure becomes accessible, every downstream step improves: you can screen smarter, optimize faster, and
            identify risk earlier.
          </p>
          <div class="callout panel" aria-label="Key shift callout">
            <h3><span class="grad-text">The shift</span></h3>
            <p>
              We aren‚Äôt just running more experiments‚Äîwe‚Äôre building a <span class="ai-signal"><strong>digital map</strong></span> of the system and using it
              to make better bets earlier.
            </p>
          </div>
          <h2>3) The New Preclinical Playbook</h2>
          <p>
            With AI-native R&amp;D, the value isn‚Äôt only in speed‚Äîit‚Äôs in <strong>precision</strong>. Here are the three
            inflection points where the modern workflow changes character.
          </p>
          <h3>3.1 Target Validation: Visualize the ‚ÄúLock‚Äù First ‚úÖ</h3>
          <p>
            Target validation improves when you can see plausible structure early. That means fewer dead-end hypotheses and a
            clearer path to mechanism-driven design.
          </p>
          <h3>3.2 In Silico Screening: Test Millions Digitally ‚úÖ</h3>
          <p>
            Instead of brute-force wet-lab screening, teams can prioritize candidates computationally‚Äînarrowing down the search
            space before spending time and money in the lab. You still validate experimentally, but you start from a smarter set.
          </p>
          <h3>3.3 Precision Engineering: Lead Optimization Becomes Data-Driven ‚úÖ</h3>
          <p>
            When you can model interactions with stronger priors, optimization becomes less ‚Äútrial and error‚Äù and more like
            engineering: identify the constraint, propose the modification, test, iterate‚Äîfaster and with clearer intent.
          </p>
          <div class="divider"></div>
          <h2>4) What This Means for the Future of Human Health</h2>
          <p>
            The biggest unlock is strategic: we‚Äôre not just accelerating the same pipeline‚Äîwe‚Äôre increasing the quality of
            decisions made at the earliest stages. Better early decisions compound into fewer late-stage failures.
          </p>
          <p>
            In other words: we aren‚Äôt just guessing anymore. We‚Äôre building the future of human health with a digital map.
          </p>
          <div class="callout panel" aria-label="Read full breakdown callout">
            <h3><span class="grad-text">Read the full breakdown</span></h3>
            <p>
              If you want the deeper dive into the AI-native R&amp;D revolution (and how AlphaFold anchors the preclinical
              lifecycle), read the full post here:
              <a href="https://1u477n.github.io/blogs/20260104_aialphafoldblueprint.html">The AI Blueprint: AlphaFold in Drug Discovery</a>.
            </p>
          </div>
          <h2>5) Tags</h2>
          <p>
            #AI #SmallMolecule #DrugDiscovery #AlphaFold #Biotech #Innovation #Pharma #HealthTech #FutureOfMedicine
          </p>
        </div>

        <div class="divider"></div>
        <section class="related-section">
          <div class="related-head">Read Next</div>
          <div id="relatedGrid" class="related-grid">
            </div>
        </section>
      </article>

      <aside class="toc panel" aria-label="On this page">
        <details open>
          <summary>On this page</summary>
          <nav class="toc-nav" id="tocNav" aria-label="Table of contents"></nav>
        </details>
      </aside>
    </div>

    <footer class="footer panel">
      ¬© <span id="year"></span> ¬∑ <a href="https://1u477n.github.io/blogs/mainpage.html">Blogs</a> ¬∑
      <a href="https://1u477n.github.io/">Home</a>
    </footer>
  </main>

  <script>
    // Theme
    (function(){
      const root = document.documentElement;
      const toggle = document.getElementById("themeToggle");
      if (!toggle) return;
      const storageKey = "theme";
      const media = window.matchMedia("(prefers-color-scheme: light)");
      const safeGet = () => { try { return localStorage.getItem(storageKey); } catch { return null; } };
      const safeSet = (v) => { try { localStorage.setItem(storageKey, v); } catch {} };
      const systemTheme = () => (media.matches ? "light" : "dark");
      function setToggleText(theme){
        const next = theme === "dark" ? "light" : "dark";
        toggle.setAttribute("aria-label", `Switch to ${next} mode`);
        toggle.setAttribute("title", `Switch to ${next} mode`);
      }
      function applyTheme(theme, persist){
        root.setAttribute("data-theme", theme);
        const meta = document.getElementById("themeColor");
        if (meta) meta.setAttribute("content", theme === "dark" ? "#070A12" : "#ffffff");
        if (persist) safeSet(theme);
        setToggleText(theme);
      }
      const saved = safeGet();
      if (saved === "light" || saved === "dark") { applyTheme(saved, false); }
      else { applyTheme(systemTheme(), false); }
      toggle.addEventListener("click", () => {
        const current = root.getAttribute("data-theme") || systemTheme();
        applyTheme(current === "dark" ? "light" : "dark", true);
      });
    })();

    // Reading Time, Year, Zen/Signal
    window.addEventListener('DOMContentLoaded', () => {
      const prose = document.getElementById("prose");
      const readTime = document.getElementById("readTime");
      const progressBar = document.getElementById("progressBar");
      
      // Reading Time (using textContent for reliability)
      const text = (prose?.textContent || "").trim();
      const words = text ? text.split(/\s+/).length : 0;
      const wpm = 220;
      const mins = Math.max(1, Math.round(words / wpm));
      if(readTime) readTime.textContent = `${mins} min`;

      // Year
      document.getElementById("year").textContent = new Date().getFullYear();

      // Date
      const d = new Date();
      const timeEl = document.getElementById("today");
      if (timeEl) {
          const fmt = new Intl.DateTimeFormat(undefined, { year: "numeric", month: "short", day: "2-digit" });
          timeEl.textContent = fmt.format(d);
          const iso = new Date(d.getTime() - (d.getTimezoneOffset() * 60000)).toISOString().slice(0,10);
          timeEl.setAttribute("datetime", iso);
      }

      // Progress Bar
      let ticking = false;
      function updateProgress(){
        ticking = false;
        const doc = document.documentElement;
        const scrollTop = doc.scrollTop || document.body.scrollTop;
        const scrollHeight = (doc.scrollHeight || document.body.scrollHeight) - doc.clientHeight;
        const p = scrollHeight > 0 ? (scrollTop / scrollHeight) : 0;
        if(progressBar) progressBar.style.width = `${Math.min(100, Math.max(0, p * 100))}%`;
      }
      window.addEventListener("scroll", () => {
        if (!ticking){ ticking = true; requestAnimationFrame(updateProgress); }
      }, { passive: true });
      updateProgress();

      // Zen Mode
      const zenBtn = document.getElementById("zenBtn");
      if(zenBtn) {
        zenBtn.addEventListener("click", () => {
          document.body.classList.toggle("zen-mode");
          const active = document.body.classList.contains("zen-mode");
          zenBtn.style.color = active ? "#38BDF8" : "";
          zenBtn.style.background = active ? "rgba(56,189,248,.15)" : "";
        });
      }

      // Signal Mode
      const signalBtn = document.getElementById("signalBtn");
      if(signalBtn) {
        signalBtn.addEventListener("click", () => {
          document.body.classList.toggle("signal-mode");
          const active = document.body.classList.contains("signal-mode");
          signalBtn.style.color = active ? "#A78BFA" : "";
          signalBtn.style.background = active ? "rgba(167,139,250,.15)" : "";
        });
      }

      // Share
      const shareBtn = document.getElementById("shareBtn");
      if(shareBtn) {
        shareBtn.addEventListener("click", async () => {
          const data = { title: document.title, url: window.location.href };
          if (navigator.share) {
            try { await navigator.share(data); } catch (err) {}
          } else {
            try { await navigator.clipboard.writeText(window.location.href); alert("Link copied!"); } catch(e){}
          }
        });
      }
    });

    // Menu
    (function(){
      const menuBtn = document.getElementById("menuBtn");
      const menuPanel = document.getElementById("menuPanel");
      if (!menuBtn || !menuPanel) return;
      function openMenu(){ menuPanel.classList.add("open"); menuBtn.setAttribute("aria-expanded", "true"); }
      function closeMenu(){ menuPanel.classList.remove("open"); menuBtn.setAttribute("aria-expanded", "false"); }
      menuBtn.addEventListener("click", (e) => { e.stopPropagation(); if(menuPanel.classList.contains("open")) closeMenu(); else openMenu(); });
      document.addEventListener("click", () => { if(menuPanel.classList.contains("open")) closeMenu(); });
      menuPanel.addEventListener("click", (e) => e.stopPropagation());
      document.addEventListener("keydown", (e) => { if(e.key === "Escape") closeMenu(); });
    })();

    // TOC
    (function(){
      const prose = document.getElementById("prose");
      const tocNav = document.getElementById("tocNav");
      if (!prose || !tocNav) return;
      const headings = Array.from(prose.querySelectorAll("h2, h3"));
      if (!headings.length) return;
      
      const slugify = (s) => s.toLowerCase().trim().replace(/[^\w\s-]/g, "").replace(/\s+/g, "-");
      
      tocNav.innerHTML = headings.map((h, i) => {
        if(!h.id) h.id = slugify(h.textContent) + "-" + i;
        const lvl = h.tagName === "H3" ? "3" : "2";
        return `<a href="#${h.id}" data-id="${h.id}" data-level="${lvl}">${h.textContent}</a>`;
      }).join("");

      const links = Array.from(tocNav.querySelectorAll("a"));
      const setActive = (id) => links.forEach(a => a.classList.toggle("active", a.dataset.id === id));
      const obs = new IntersectionObserver((entries) => {
        const visible = entries.filter(e => e.isIntersecting).sort((a,b) => b.intersectionRatio - a.intersectionRatio);
        if(visible[0]) setActive(visible[0].target.id);
      }, { threshold: [0.1], rootMargin: "-10% 0px -50% 0px" });
      headings.forEach(h => obs.observe(h));
    })();

    // Lightbox
    (function(){
      const modal = document.getElementById("imageLightbox");
      const modalImg = document.getElementById("img01");
      const captionText = document.getElementById("caption");
      const closeBtn = document.getElementById("lightboxClose");
      const images = Array.from(document.querySelectorAll("img.zoomable"));
      if(!images.length) return;

      function openLightbox(img){
        modal.classList.add("open");
        modalImg.src = img.currentSrc || img.src;
        captionText.textContent = img.alt;
        document.body.style.overflow = "hidden";
      }
      function closeLightbox(){
        modal.classList.remove("open");
        document.body.style.overflow = "";
      }

      images.forEach(img => {
        img.addEventListener("click", () => openLightbox(img));
      });
      closeBtn.addEventListener("click", closeLightbox);
      modal.addEventListener("click", (e) => { if(e.target === modal) closeLightbox(); });
      document.addEventListener("keydown", (e) => { if(e.key === "Escape") closeLightbox(); });
    })();

    // Related Posts
    (async function(){
      const grid = document.getElementById("relatedGrid");
      if(!grid) return;
      try {
        const res = await fetch("blogs_mainpage.csv");
        if(!res.ok) return;
        const text = await res.text();
        
        // Exact same CSV algorithm as requested
        function parseCSV(text){
          const rows = [];
          let row = [];
          let field = "";
          let inQuotes = false;
          for (let i = 0; i < text.length; i++){
            const c = text[i];
            if (inQuotes){
              if (c === '"'){
                if (text[i+1] === '"'){ field += '"'; i++; } else { inQuotes = false; }
              } else { field += c; }
            } else {
              if (c === '"'){ inQuotes = true; }
              else if (c === ","){ row.push(field); field = ""; }
              else if (c === "\n"){ row.push(field); field = ""; if(row.some(v=>v.trim())) rows.push(row); row=[]; }
              else if (c !== "\r"){ field += c; }
            }
          }
          row.push(field);
          if(row.some(v=>v.trim())) rows.push(row);
          return rows;
        }

        function toObjects(raw){
          if (!raw.length) return [];
          const headers = raw[0].map(h => (h||"").trim().toLowerCase());
          const out = [];
          for (let i = 1; i < raw.length; i++){
            const r = raw[i];
            const obj = {};
            for (let j = 0; j < headers.length; j++){
              obj[headers[j]] = (r[j] ?? "").toString().trim();
            }
            out.push(obj);
          }
          return out;
        }

        const data = toObjects(parseCSV(text));
        const currentHref = window.location.href.split("#")[0];

        // Filter out current page
        let others = data.filter(d => {
          const url = d.blog_url || "";
          // Exclude if current page URL contains the slug from CSV
          return url && !currentHref.includes(url.split("/").pop());
        });

        // Shuffle
        others.sort(() => 0.5 - Math.random());

        // Take 2
        const selected = others.slice(0, 2);
        
        if (selected.length === 0) {
            document.querySelector(".related-section").style.display = "none";
            return;
        }

        grid.innerHTML = selected.map(item => `
          <a href="${item.blog_url}" class="rel-card">
            <h4 class="rel-title">${item.title}</h4>
            <div class="rel-date">${item.date || ""}</div>
          </a>
        `).join("");

      } catch(e){}
    })();
  </script>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
    import { getFirestore, doc, getDoc, setDoc, updateDoc, increment, onSnapshot, runTransaction } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDNsnOdNrG6D-wGpo8bRhqcadnGt-oUQmE",
      authDomain: "searchablevideos.firebaseapp.com",
      projectId: "searchablevideos",
      storageBucket: "searchablevideos.firebasestorage.app",
      messagingSenderId: "345918351272",
      appId: "1:345918351272:web:82534dbe5b10dc8e131f9d",
      measurementId: "G-VW323NJP26"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const COLLECTION = "blogLikes";
    const postKey = "https://1u477n.github.io/blogs/20260123_trialanderror_over.html";

    // Hash ID
    function fnv1a(str){
      let h = 0x811c9dc5;
      for (let i=0; i<str.length; i++) { h ^= str.charCodeAt(i); h = Math.imul(h, 0x01000193); }
      return (h >>> 0).toString(16).padStart(8, "0");
    }
    const docId = fnv1a(postKey);
    const ref = doc(db, COLLECTION, docId);

    // Elements
    function heartSVG(){
      return `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path class="heart-fill" d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78Z" fill="transparent"></path></svg>`;
    }
    
    // Inject heart into container if needed
    const pill = document.querySelector(".like-pill");
    if(pill && !pill.innerHTML.trim()){
       pill.innerHTML = `
         <span class="like-btn" title="Like">${heartSVG()}</span>
         <span class="like-count">0</span>
       `;
    }

    const likeBtn = document.querySelector(".like-btn");
    const countEl = document.querySelector(".like-count");
    const viewEl = document.getElementById("viewCount");

    // 1. Safe Init
    getDoc(ref).then(snap => {
      if(!snap.exists()) setDoc(ref, { count: 0, views: 1, postKey }, { merge: true });
      else updateDoc(ref, { views: increment(1) });
    });

    // 2. Listen
    onSnapshot(ref, (snap) => {
      if(snap.exists()){
        const d = snap.data();
        if(countEl) countEl.textContent = d.count || 0;
        if(viewEl) viewEl.textContent = d.views || 0;
      }
    });

    // 3. Toggle Like
    if(likeBtn){
        const storageKey = `liked_${docId}`;
        let isLiked = localStorage.getItem(storageKey) === "1";
        if(isLiked) likeBtn.classList.add("liked");

        likeBtn.addEventListener("click", async () => {
          const next = !isLiked;
          likeBtn.classList.toggle("liked", next);
          if(next) localStorage.setItem(storageKey, "1"); else localStorage.removeItem(storageKey);
          isLiked = next;

          try {
            await updateDoc(ref, { count: increment(next ? 1 : -1) });
          } catch(e) {
            console.error(e);
            likeBtn.classList.toggle("liked", !next);
          }
        });
    }
  </script>
</body>
</html>
